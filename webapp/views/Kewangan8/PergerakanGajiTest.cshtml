@model IEnumerable<eSPP.Models.PergerakanGajiModels>

<div id="content">

    <div class="row">
        <div class="col-xs-12 col-sm-9 col-md-9 col-lg-9">
            <h1 class="page-title txt-color-blueDark">
                <i class="fa-fw fa fa-pencil-square-o"></i>
                Forms
                <span>
                    >
                    Pergerakan Gaji
                </span>
            </h1>
        </div>
    </div>

    <section id="widget-grid" class="">

        <!-- row -->
        <div class="row">

            <!-- NEW WIDGET START -->
            <!-- WIDGET END -->

        </div>

        <!-- end row -->
        <!-- row -->
        <div class="row">

            <!-- NEW WIDGET START -->
            <article class="col-sm-12">

                <!-- Widget ID (each widget will need unique ID)-->
                <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">
                    <!-- widget options:
                    usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">

                    data-widget-colorbutton="false"
                    data-widget-editbutton="false"
                    data-widget-togglebutton="false"
                    data-widget-deletebutton="false"
                    data-widget-fullscreenbutton="false"
                    data-widget-custombutton="false"
                    data-widget-collapsed="true"
                    data-widget-sortable="false"

                    -->
                    <header>
                        <span class="widget-icon"> <i class="fa fa-align-justify"></i> </span>
                        <h2>Pergerakan Gaji</h2>

                    </header>

                    <!-- widget div-->
                    <div>

                        <!-- widget edit box -->
                        <div class="jarviswidget-editbox">
                            <!-- This area used as dropdown edit box -->

                        </div>
                        <!-- end widget edit box -->
                        <!-- widget content -->
                        <div class="widget-body">

                            <div class="row">

                                <div class="col col-lg-8 col-md-10 col-sm-12 col-xs-12 col-lg-offset-2 col-md-offset-1">
                                    <div class="well">
                                        @using (Html.BeginForm("PergerakanGaji", "Kewangan8", FormMethod.Get))
                                        {
                                            <div class="row">
                                                <div class="col smart-form col-lg-4 col-md-4 col-sm-4 col-xs-12">
                                                    <div class="select">
                                                        <select name="key" id="key" class="form-control" disabled="disabled">
                                                            <option selected disabled="disabled">Jenis</option>
                                                            <option value="1" @((string)ViewBag.key == "1" ? "selected" : "")>No. Pekerja</option>
                                                            <option value="2" @((string)ViewBag.key == "2" ? "selected" : "")>Nama Pekerja</option>
                                                            <option value="3" @((string)ViewBag.key == "3" ? "selected" : "")>No. KP(Baru)</option>
                                                            <option value="4" @((string)ViewBag.key == "4" || (string)ViewBag.key == null ? "selected" : "")>Bulan Pergerakan</option>
                                                        </select>
                                                        <i></i>
                                                    </div>
                                                    @Html.Hidden("key", "4")
                                                </div>
                                                <div class="col smart-form col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                                    <div class="select" id="actionText">
                                                        <select class="form-control" id="bulan" name="bulan">
                                                            <option value="" disabled="disabled" selected>Bulan</option>
                                                            <option value="1" @((int?)ViewBag.bulan == 1 ? "selected" : "")>Januari</option>
                                                            <option value="2" @((int?)ViewBag.bulan == 2 ? "selected" : "")>Febuari</option>
                                                            <option value="3" @((int?)ViewBag.bulan == 3 ? "selected" : "")>Mac</option>
                                                            <option value="4" @((int?)ViewBag.bulan == 4 ? "selected" : "")>April</option>
                                                            <option value="5" @((int?)ViewBag.bulan == 5 ? "selected" : "")>Mei</option>
                                                            <option value="6" @((int?)ViewBag.bulan == 6 ? "selected" : "")>Jun</option>
                                                            <option value="7" @((int?)ViewBag.bulan == 7 ? "selected" : "")>Julai</option>
                                                            <option value="8" @((int?)ViewBag.bulan == 8 ? "selected" : "")>Ogos</option>
                                                            <option value="9" @((int?)ViewBag.bulan == 9 ? "selected" : "")>September</option>
                                                            <option value="10" @((int?)ViewBag.bulan == 10 ? "selected" : "")>Oktober</option>
                                                            <option value="11" @((int?)ViewBag.bulan == 11 ? "selected" : "")>November</option>
                                                            <option value="12" @((int?)ViewBag.bulan == 12 ? "selected" : "")>Disember</option>
                                                        </select><i></i>
                                                    </div>
                                                </div>
                                                <div class="col col-lg-2 col-md-2 col-sm-2 col-xs-12">
                                                    <div class="button">
                                                        <button class="btn btn-default btn-primary" type="submit">
                                                            <i class="fa fa-search"></i> Cari
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                    </div>
                                </div>

                            </div>
                            <br />
                            @{ 
                                List<PergerakanGajiModels> editKew8 = ViewBag.EditKew8;
                                List<PergerakanGajiModels> jumEditKew8 = ViewBag.JumEditKew8;
                                var m = 0;
                            }
                            @if (editKew8.Count() > 0)
                            {
                                <fieldset>
                                    <legend>
                                        Senarai Pekerja :: Kemaskini / Muktamad Pergerakan Gaji
                                    </legend>

                                    <table id="datatable_tabletools2" class="table table-striped table-bordered table-hover" width="220%" style="overflow-x: scroll; width: 1700px;">
                                        <thead class="smart-form">
                                            <tr>
                                                <th>
                                                    <label class="checkbox">
                                                        <input type="checkbox" name="pilihPekerja2" id="edit2" checked="checked">
                                                        <i></i>
                                                    </label>
                                                </th>
                                                <th data-class="expand" width="20%">Nama Pekerja</th>
                                                <th data-hide="phone,tablet" width="15%">Jenis Pergerakan Gaji</th>
                                                <th data-hide="phone,tablet">Gred</th>
                                                <th data-hide="phone,tablet">Gaji Min/Max</th>

                                                <th data-hide="phone,tablet">Pergerakan Gaji Pokok</th>
                                                <th data-hide="phone,tablet">Matriks Gaji</th>
                                                <th data-hide="phone,tablet">Kritikal</th>
                                                <th data-hide="phone,tablet">Wilayah</th>
                                                <th data-hide="phone,tablet">Pilih</th>
                                            </tr>
                                        </thead>
                                        <tbody class="smart-form">
                                            @for (var item3 = 0; item3 < jumEditKew8.Count(); item3++)
                                            {
                                                var n = 0;
                                                for (var item2 = 0; item2 < editKew8.Count(); item2++)
                                                {

                                                    if (editKew8.ElementAt(item2).HR_KEW8_ID == jumEditKew8.ElementAt(item3).HR_KEW8_ID && editKew8.ElementAt(item2).HR_KOD_PERUBAHAN == jumEditKew8.ElementAt(item3).HR_KOD_PERUBAHAN && editKew8.ElementAt(item2).HR_TARIKH_MULA == jumEditKew8.ElementAt(item3).HR_TARIKH_MULA)
                                                    {
                                                        var style = "";
                                                        if (n != 0)
                                                        {
                                                            style = "border-top-style:none";
                                                        }
                                                        if(editKew8.ElementAt(item2).HR_FINALISED_IND_HR == "Y")
                                                        {
                                                        <tr class="success">
                                                            <td valign="middle">
                                                                <label class="checkbox">
                                                                    <input type="checkbox" name="[@item2].HR_NO_PEKERJA3" class="form-control HR_NO_PEKERJA3" id="@(item2)__HR_NO_PEKERJA3" value="@editKew8.ElementAt(item2).HR_NO_PEKERJA" disabled= "disabled">
                                                                    <i></i>
                                                                </label>

                                                            </td>
                                                            <td valign="middle">
                                                                @Html.Hidden("[" + item2 + "].HR_TARIKH_MULA", string.Format("{0:dd/MM/yyyy}", editKew8.ElementAt(item2).HR_TARIKH_MULA))
                                                                @Html.Hidden("[" + item2 + "].HR_KEW8_ID", editKew8.ElementAt(item2).HR_KEW8_ID)
                                                                @Html.Hidden("[" + item2 + "].HR_KOD_PELARASAN", editKew8.ElementAt(item2).HR_KOD_PELARASAN)



                                                                <a target="_blank" href='@Url.Action("SejarahPergerakanGaji", "Kewangan8", new { key = "1", value = editKew8.ElementAt(item2).HR_NO_PEKERJA, kod = editKew8.ElementAt(item2).HR_KOD_PERUBAHAN })' title="Senarai Pergerakan Gaji">@Html.DisplayFor(model => editKew8.ElementAt(item2).HR_NAMA_PEKERJA)</a>
                                                                <br />
                                                                <strong>No KP :</strong> @Html.DisplayFor(model => editKew8.ElementAt(item2).HR_NO_KPBARU)
                                                                <br />
                                                                <strong>No Pekerja :</strong> @Html.DisplayFor(model => editKew8.ElementAt(item2).HR_NO_PEKERJA)

                                                            </td>
                                                            <td valign="middle">
                                                                <div class="col col-12">
                                                                    <label class="radio">
                                                                        @Html.RadioButton("[" + item2 + "].HR_JENIS_PERGERAKAN3", "D", isChecked: (editKew8.ElementAt(item2).HR_JENIS_PERGERAKAN == "D") ? true : false, htmlAttributes: new { @class = "form-control HR_JENIS_PERGERAKAN3", disabled= "disabled" })
                                                                        <i></i>Mendatar
                                                                    </label>
                                                                    <label class="radio">
                                                                        @Html.RadioButton("[" + item2 + "].HR_JENIS_PERGERAKAN3", "S", isChecked: (editKew8.ElementAt(item2).HR_JENIS_PERGERAKAN == "S") ? true : false, htmlAttributes: new { @class = "form-control HR_JENIS_PERGERAKAN3", disabled = "disabled" })
                                                                        <i></i>Statik
                                                                    </label>
                                                                    <label class="radio">
                                                                        @Html.RadioButton("[" + item2 + "].HR_JENIS_PERGERAKAN3", "J", isChecked: (editKew8.ElementAt(item2).HR_JENIS_PERGERAKAN == "J") ? true : false, htmlAttributes: new { @class = "form-control HR_JENIS_PERGERAKAN3", disabled = "disabled" })
                                                                        <i></i>Anjakan
                                                                    </label>
                                                                </div>
                                                            </td>
                                                            <td valign="middle">
                                                                <strong>Lama :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_GRED_LAMA2", editKew8.ElementAt(item2).HR_GRED_LAMA, new { @class = "form-control HR_GRED_LAMA2", disabled = "disabled" })
                                                                </label>
                                                                <br />
                                                                <strong>Baru :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_GRED2", editKew8.ElementAt(item2).HR_GRED, new { @class = "form-control HR_GRED2", list = "list-gred2", autocomplete = "off", disabled = "disabled" })
                                                                    <datalist id="list-gred2">
                                                                        @foreach (GE_PARAMTABLE gred in ViewBag.gred)
                                                                        {
                                                                            <option value="@gred.SHORT_DESCRIPTION" data-value="@gred.ORDINAL">@gred.ORDINAL</option>
                                                                        }
                                                                    </datalist>
                                                                </label>
                                                            </td>
                                                            <td valign="middle">
                                                                <strong>Min Baru:</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_GAJI_MIN2", editKew8.ElementAt(item2).HR_GAJI_MIN, new { @class = "form-control HR_GAJI_MIN2", list = "list-min2", autocomplete = "off", disabled = "disabled" })
                                                                    <datalist id="list-min2"></datalist>
                                                                </label>
                                                                <br />
                                                                <strong>Max Baru:</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_GAJI_MAX2", editKew8.ElementAt(item2).HR_GAJI_MAX, new { @class = "form-control HR_GAJI_MAX2", list = "list-max2", autocomplete = "off", disabled = "disabled" })
                                                                    <datalist id="list-max2"></datalist>
                                                                </label>
                                                            </td>
                                                            <td valign="middle">
                                                                <strong>Gaji Lama :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_GAJI_LAMA2", editKew8.ElementAt(item2).HR_GAJI_LAMA, new { @class = "form-control HR_GAJI_LAMA2", disabled = "disabled" })
                                                                </label>
                                                                <br />
                                                                <strong>Gaji Baru :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_GAJI_BARU2", editKew8.ElementAt(item2).HR_GAJI_BARU, new { @class = "form-control HR_GAJI_BARU2", id = "HR_GAJI_BARU2", list = "list-gaji2", autocomplete = "off", disabled = "disabled" })
                                                                    <datalist id="list-gaji2"></datalist>
                                                                </label>
                                                                <br />
                                                                <strong>Perubahan :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_JUMLAH_PERUBAHAN2", editKew8.ElementAt(item2).HR_JUMLAH_PERUBAHAN, new { @class = "form-control HR_JUMLAH_PERUBAHAN2", disabled = "disabled" })
                                                                </label>
                                                            </td>
                                                            <td valign="middle">
                                                                <strong>Lama :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_MATRIKS_GAJI_LAMA2", editKew8.ElementAt(item2).HR_MATRIKS_GAJI_LAMA, new { @class = "form-control HR_MATRIKS_GAJI_LAMA2", disabled = "disabled" })
                                                                </label>
                                                                <br />
                                                                <strong>Baru :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_MATRIKS_GAJI2", editKew8.ElementAt(item2).HR_MATRIKS_GAJI, new { @class = "form-control HR_MATRIKS_GAJI2", disabled = "disabled" })
                                                                </label>
                                                            </td>
                                                            <td valign="middle">
                                                                <strong>Nilai % :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.Hidden("[" + item2 + "].HR_KOD_KRITIKAL2", editKew8.ElementAt(item2).HR_KOD_KRITIKAL, new { @class = "form-control HR_KOD_KRITIKAL2" })
                                                                    @Html.TextBox("[" + item2 + "].HR_KRITIKAL2", editKew8.ElementAt(item2).HR_KRITIKAL, new { @class = "form-control HR_KRITIKAL2", disabled = "disabled" })
                                                                </label>
                                                                <br />
                                                                <strong>Perubahan :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_PERUBAHAN_KRITIKAL2", editKew8.ElementAt(item2).HR_PERUBAHAN_KRITIKAL, new { @class = "form-control HR_PERUBAHAN_KRITIKAL2", disabled = "disabled" })
                                                                </label>
                                                                <br />
                                                                <strong>Pergerakan :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_PERGERAKAN_EKAL2", editKew8.ElementAt(item2).HR_PERGERAKAN_EKAL, new { @class = "form-control HR_PERGERAKAN_EKAL2", disabled = "disabled" })
                                                                </label>
                                                            </td>
                                                            <td valign="middle">
                                                                <strong>Nilai % :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.Hidden("[" + item2 + "].HR_KOD_WILAYAH2", editKew8.ElementAt(item2).HR_KOD_WILAYAH, new { @class = "form-control HR_KOD_WILAYAH2" })
                                                                    @Html.TextBox("[" + item2 + "].HR_WILAYAH2", editKew8.ElementAt(item2).HR_WILAYAH, new { @class = "form-control HR_WILAYAH2", disabled = "disabled" })
                                                                </label>
                                                                <br />
                                                                <strong>Perubahan :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_PERUBAHAN_WILAYAH2", editKew8.ElementAt(item2).HR_PERUBAHAN_WILAYAH, new { @class = "form-control HR_PERUBAHAN_WILAYAH2", disabled = "disabled" })
                                                                </label>
                                                                <br />
                                                                <strong>Pergerakan :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_PERGERAKAN_EWIL2", editKew8.ElementAt(item2).HR_PERGERAKAN_EWIL, new { @class = "form-control HR_PERGERAKAN_EWIL2", disabled = "disabled" })
                                                                </label>
                                                            </td>
                                                            <td style="@style">
                                                                @if (n == 0)
                                                                {
                                                                    <div class="btn-group-vertical">
                                                                        <a class="btn btn-default btn-xs" href="javascript:void(0)" data-id="@editKew8.ElementAt(item2).HR_KEW8_ID" data-kodperubahan="@editKew8.ElementAt(item2).HR_KOD_PERUBAHAN" data-tarikh="@string.Format("{0:dd/MM/yyyy}", editKew8.ElementAt(item2).HR_TARIKH_MULA)" data-kodpelarasan="" title="Kemaskini", disabled= "disabled"><i class="fa fa-edit"></i></a>
                                                                        <a class="btn btn-default btn-xs" href="javascript:void(0)" data-id="@editKew8.ElementAt(item2).HR_KEW8_ID" data-kodperubahan="@editKew8.ElementAt(item2).HR_KOD_PERUBAHAN" data-tarikh="@string.Format("{0:dd/MM/yyyy}", editKew8.ElementAt(item2).HR_TARIKH_MULA)" data-kodpelarasan="" title="Padam", disabled= "disabled"><i class="fa fa-trash-o"></i></a>
                                                                        <a class="btn btn-default btn-xs" href="javascript:void(0)" data-id="@editKew8.ElementAt(item2).HR_KEW8_ID" data-kodperubahan="@editKew8.ElementAt(item2).HR_KOD_PERUBAHAN" data-tarikh="@string.Format("{0:dd/MM/yyyy}", editKew8.ElementAt(item2).HR_TARIKH_MULA)" data-kodpelarasan="" title="Muktamad", disabled= "disabled"><i class="fa fa-check-square-o"></i></a>
                                                                        <a class="btn btn-default btn-xs btn-cetak" target="_blank" id="btn-cetak" href="javascript:void(0)" data-id="@editKew8.ElementAt(item2).HR_KEW8_ID" data-kodperubahan="@editKew8.ElementAt(item2).HR_KOD_PERUBAHAN" data-tarikh="@string.Format("{0:dd/MM/yyyy}", editKew8.ElementAt(item2).HR_TARIKH_MULA)" data-kodpelarasan="" title="Cetak"><i class="fa fa-print"></i></a>
                                                                        <a class="btn btn-default btn-xs btn-surat" id="btn-surat" href="javascript:void(0)" data-id="@editKew8.ElementAt(item2).HR_KEW8_ID" data-kodperubahan="@editKew8.ElementAt(item2).HR_KOD_PERUBAHAN" data-tarikh="@string.Format("{0:dd/MM/yyyy}", editKew8.ElementAt(item2).HR_TARIKH_MULA)" data-kodpelarasan="" title="Cetak Surat"><i class="fa fa-file-text"></i></a>
                                                                    </div>
                                                                }
                                                            </td>

                                                        </tr>
                                                        }
                                                        if (editKew8.ElementAt(item2).HR_FINALISED_IND_HR != "Y")
                                                        {
                                                        <tr>
                                                            <td valign="middle">
                                                                <label class="checkbox">
                                                                    <input type="checkbox" name="[@item2].HR_NO_PEKERJA3" class="form-control HR_NO_PEKERJA3" id="@(item2)__HR_NO_PEKERJA3" value="@editKew8.ElementAt(item2).HR_NO_PEKERJA" checked="checked">
                                                                    <i></i>
                                                                </label>

                                                            </td>
                                                            <td valign="middle">
                                                                @Html.Hidden("[" + item2 + "].HR_TARIKH_MULA", string.Format("{0:dd/MM/yyyy}", editKew8.ElementAt(item2).HR_TARIKH_MULA))
                                                                @Html.Hidden("[" + item2 + "].HR_KEW8_ID", editKew8.ElementAt(item2).HR_KEW8_ID)
                                                                @Html.Hidden("[" + item2 + "].HR_KOD_PELARASAN", editKew8.ElementAt(item2).HR_KOD_PELARASAN)



                                                                <a target="_blank" href='@Url.Action("SejarahPergerakanGaji", "Kewangan8", new { key = "1", value = editKew8.ElementAt(item2).HR_NO_PEKERJA, kod = editKew8.ElementAt(item2).HR_KOD_PERUBAHAN })' title="Senarai Pergerakan Gaji">@Html.DisplayFor(model => editKew8.ElementAt(item2).HR_NAMA_PEKERJA)</a>
                                                                <br />
                                                                <strong>No KP :</strong> @Html.DisplayFor(model => editKew8.ElementAt(item2).HR_NO_KPBARU)
                                                                <br />
                                                                <strong>No Pekerja :</strong> @Html.DisplayFor(model => editKew8.ElementAt(item2).HR_NO_PEKERJA)

                                                            </td>
                                                            <td valign="middle">
                                                                <div class="col col-12">
                                                                    <label class="radio">
                                                                        @Html.RadioButton("[" + item2 + "].HR_JENIS_PERGERAKAN3", "D", isChecked: (editKew8.ElementAt(item2).HR_JENIS_PERGERAKAN == "D") ? true : false, htmlAttributes: new { @class = "form-control HR_JENIS_PERGERAKAN3" })
                                                                        <i></i>Mendatar
                                                                    </label>
                                                                    <label class="radio">
                                                                        @Html.RadioButton("[" + item2 + "].HR_JENIS_PERGERAKAN3", "S", isChecked: (editKew8.ElementAt(item2).HR_JENIS_PERGERAKAN == "S") ? true : false, htmlAttributes: new { @class = "form-control HR_JENIS_PERGERAKAN3" })
                                                                        <i></i>Statik
                                                                    </label>
                                                                    <label class="radio">
                                                                        @Html.RadioButton("[" + item2 + "].HR_JENIS_PERGERAKAN3", "J", isChecked: (editKew8.ElementAt(item2).HR_JENIS_PERGERAKAN == "J") ? true : false, htmlAttributes: new { @class = "form-control HR_JENIS_PERGERAKAN3" })
                                                                        <i></i>Anjakan
                                                                    </label>
                                                                </div>
                                                            </td>
                                                            <td valign="middle">
                                                                <strong>Lama :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_GRED_LAMA2", editKew8.ElementAt(item2).HR_GRED_LAMA, new { @class = "form-control HR_GRED_LAMA2", disabled = "disabled" })
                                                                </label>
                                                                <br />
                                                                <strong>Baru :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_GRED2", editKew8.ElementAt(item2).HR_GRED, new { @class = "form-control HR_GRED2", list = "list-gred2", autocomplete = "off", @readonly = "readonly" })
                                                                    <datalist id="list-gred2">
                                                                        @foreach (GE_PARAMTABLE gred in ViewBag.gred)
                                                                        {
                                                                            <option value="@gred.SHORT_DESCRIPTION" data-value="@gred.ORDINAL">@gred.ORDINAL</option>
                                                                        }
                                                                    </datalist>
                                                                </label>
                                                            </td>
                                                            <td valign="middle">
                                                                <strong>Min Baru:</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_GAJI_MIN2", editKew8.ElementAt(item2).HR_GAJI_MIN, new { @class = "form-control HR_GAJI_MIN2", list = "list-min2", autocomplete = "off", @readonly = "readonly" })
                                                                    <datalist id="list-min2"></datalist>
                                                                </label>
                                                                <br />
                                                                <strong>Max Baru:</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_GAJI_MAX2", editKew8.ElementAt(item2).HR_GAJI_MAX, new { @class = "form-control HR_GAJI_MAX2", list = "list-max2", autocomplete = "off", @readonly = "readonly" })
                                                                    <datalist id="list-max2"></datalist>
                                                                </label>
                                                            </td>
                                                            <td valign="middle">
                                                                <strong>Gaji Lama :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_GAJI_LAMA2", editKew8.ElementAt(item2).HR_GAJI_LAMA, new { @class = "form-control HR_GAJI_LAMA2", disabled = "disabled" })
                                                                </label>
                                                                <br />
                                                                <strong>Gaji Baru :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_GAJI_BARU2", editKew8.ElementAt(item2).HR_GAJI_BARU, new { @class = "form-control HR_GAJI_BARU2", id = "HR_GAJI_BARU2", list = "list-gaji2", autocomplete = "off", @readonly = "readonly" })
                                                                    <datalist id="list-gaji2"></datalist>
                                                                </label>
                                                                <br />
                                                                <strong>Perubahan :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_JUMLAH_PERUBAHAN2", editKew8.ElementAt(item2).HR_JUMLAH_PERUBAHAN, new { @class = "form-control HR_JUMLAH_PERUBAHAN2", @readonly = "readonly" })
                                                                </label>
                                                            </td>
                                                            <td valign="middle">
                                                                <strong>Lama :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_MATRIKS_GAJI_LAMA2", editKew8.ElementAt(item2).HR_MATRIKS_GAJI_LAMA, new { @class = "form-control HR_MATRIKS_GAJI_LAMA2", disabled = "disabled" })
                                                                </label>
                                                                <br />
                                                                <strong>Baru :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_MATRIKS_GAJI2", editKew8.ElementAt(item2).HR_MATRIKS_GAJI, new { @class = "form-control HR_MATRIKS_GAJI2", @readonly = "readonly" })
                                                                </label>
                                                            </td>
                                                            <td valign="middle">
                                                                <strong>Nilai % :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.Hidden("[" + item2 + "].HR_KOD_KRITIKAL2", editKew8.ElementAt(item2).HR_KOD_KRITIKAL, new { @class = "form-control HR_KOD_KRITIKAL2" })
                                                                    @Html.TextBox("[" + item2 + "].HR_KRITIKAL2", editKew8.ElementAt(item2).HR_KRITIKAL, new { @class = "form-control HR_KRITIKAL2" })
                                                                </label>
                                                                <br />
                                                                <strong>Perubahan :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_PERUBAHAN_KRITIKAL2", editKew8.ElementAt(item2).HR_PERUBAHAN_KRITIKAL, new { @class = "form-control HR_PERUBAHAN_KRITIKAL2", @readonly = "readonly" })
                                                                </label>
                                                                <br />
                                                                <strong>Pergerakan :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_PERGERAKAN_EKAL2", editKew8.ElementAt(item2).HR_PERGERAKAN_EKAL, new { @class = "form-control HR_PERGERAKAN_EKAL2", @readonly = "readonly" })
                                                                </label>
                                                            </td>
                                                            <td valign="middle">
                                                                <strong>Nilai % :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.Hidden("[" + item2 + "].HR_KOD_WILAYAH2", editKew8.ElementAt(item2).HR_KOD_WILAYAH, new { @class = "form-control HR_KOD_WILAYAH2" })
                                                                    @Html.TextBox("[" + item2 + "].HR_WILAYAH2", editKew8.ElementAt(item2).HR_WILAYAH, new { @class = "form-control HR_WILAYAH2" })
                                                                </label>
                                                                <br />
                                                                <strong>Perubahan :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_PERUBAHAN_WILAYAH2", editKew8.ElementAt(item2).HR_PERUBAHAN_WILAYAH, new { @class = "form-control HR_PERUBAHAN_WILAYAH2", @readonly = "readonly" })
                                                                </label>
                                                                <br />
                                                                <strong>Pergerakan :</strong>
                                                                <br />
                                                                <label class="input">
                                                                    @Html.TextBox("[" + item2 + "].HR_PERGERAKAN_EWIL2", editKew8.ElementAt(item2).HR_PERGERAKAN_EWIL, new { @class = "form-control HR_PERGERAKAN_EWIL2", @readonly = "readonly" })
                                                                </label>
                                                            </td>
                                                            <td style = "@style">
                                                                @if (n == 0)
                                                                {
                                                                    <div class="btn-group-vertical">
                                                                        <a class="btn btn-default btn-xs btn-edit" id="btn-edit" href="javascript:void(0)" data-id="@editKew8.ElementAt(item2).HR_KEW8_ID" data-kodperubahan="@editKew8.ElementAt(item2).HR_KOD_PERUBAHAN" data-tarikh="@string.Format("{0:dd/MM/yyyy}", editKew8.ElementAt(item2).HR_TARIKH_MULA)" data-kodpelarasan="" title="Kemaskini"><i class="fa fa-edit"></i></a>
                                                                        <a class="btn btn-default btn-xs btn-padam" id="btn-padam" href="javascript:void(0)" data-id="@editKew8.ElementAt(item2).HR_KEW8_ID" data-kodperubahan="@editKew8.ElementAt(item2).HR_KOD_PERUBAHAN" data-tarikh="@string.Format("{0:dd/MM/yyyy}", editKew8.ElementAt(item2).HR_TARIKH_MULA)" data-kodpelarasan="" title="Padam"><i class="fa fa-trash-o"></i></a>
                                                                        <a class="btn btn-default btn-xs btn-muktamad" id="btn-muktamad" href="javascript:void(0)" data-id="@editKew8.ElementAt(item2).HR_KEW8_ID" data-kodperubahan="@editKew8.ElementAt(item2).HR_KOD_PERUBAHAN" data-tarikh="@string.Format("{0:dd/MM/yyyy}", editKew8.ElementAt(item2).HR_TARIKH_MULA)" data-kodpelarasan="" title="Muktamad"><i class="fa fa-check-square-o"></i></a>
                                                                        <a class="btn btn-default btn-xs btn-cetak" target="_blank" id="btn-cetak" href="javascript:void(0)" data-id="@editKew8.ElementAt(item2).HR_KEW8_ID" data-kodperubahan="@editKew8.ElementAt(item2).HR_KOD_PERUBAHAN" data-tarikh="@string.Format("{0:dd/MM/yyyy}", editKew8.ElementAt(item2).HR_TARIKH_MULA)" data-kodpelarasan="" title="Cetak"><i class="fa fa-print"></i></a>
                                                                        <a class="btn btn-default btn-xs btn-surat" id="btn-surat" href="javascript:void(0)" data-id="@editKew8.ElementAt(item2).HR_KEW8_ID" data-kodperubahan="@editKew8.ElementAt(item2).HR_KOD_PERUBAHAN" data-tarikh="@string.Format("{0:dd/MM/yyyy}", editKew8.ElementAt(item2).HR_TARIKH_MULA)" data-kodpelarasan="" title="Cetak Surat"><i class="fa fa-file-text"></i></a>
                                                                    </div>
                                                                }
                                                            </td>

                                                        </tr>
                                                        }
                                                        n++;
                                                    }
                                                }

                                            }
                                        </tbody>
                                    </table>
                                    
                                </fieldset>
                            }
                            @if (Model.Count() > 0)
                            {
                                <fieldset>
                                    <legend>
                                        Senarai Pekerja :: Tambah Pergerakan Gaji
                                    </legend>

                                    <table id="datatable_tabletools" class="table table-striped table-bordered table-hover" width="220%" style="overflow-x: scroll; width: 1700px;">
                                        <thead class="smart-form">
                                            <tr>
                                                <th>
                                                    <label class="checkbox">
                                                        <input type="checkbox" name="pilihPekerja" id="add2" checked="checked">
                                                        <i></i>
                                                    </label>
                                                </th>
                                                <th data-class="expand" width="20%">Nama Pekerja</th>
                                                <th data-hide="phone,tablet" width="15%">Jenis Pergerakan Gaji</th>
                                                <th data-hide="phone,tablet">Gred</th>
                                                <th data-hide="phone,tablet">Gaji Min/Max</th>

                                                <th data-hide="phone,tablet">Pergerakan Gaji Pokok</th>
                                                <th data-hide="phone,tablet">Matriks Gaji</th>
                                                <th data-hide="phone,tablet">Kritikal</th>
                                                <th data-hide="phone,tablet">Wilayah</th>
                                            </tr>
                                        </thead>
                                        <tbody class="smart-form">
                                            @for (var item = 0; item < Model.Count(); item++)
                                            {
                                                m++;
                                                <tr>
                                                    <td valign="middle">
                                                        <label class="checkbox">
                                                            @*@if (Model.ElementAt(item).CHECKED == 1)
                                                                {*@
                                                            <input type="checkbox" name="[@item].HR_NO_PEKERJA2" class="form-control HR_NO_PEKERJA2" id="@(item)__HR_NO_PEKERJA2" value="@Model.ElementAt(item).HR_NO_PEKERJA" checked="checked">
                                                            @*}
                                                                else
                                                                {
                                                                    <input type="checkbox" name="[@item].HR_NO_PEKERJA2" class="form-control HR_NO_PEKERJA2" id="@(item)__HR_NO_PEKERJA2" value="@Model.ElementAt(item).HR_NO_PEKERJA" disabled="disabled">
                                                                }*@

                                                            <i></i>
                                                        </label>

                                                    </td>
                                                    <td valign="middle">
                                                        <a target="_blank" href='@Url.Action("SejarahPergerakanGaji", "Kewangan8", new { key = "1", value = Model.ElementAt(item).HR_NO_PEKERJA, kod = Model.ElementAt(item).HR_KOD_PERUBAHAN })' title="Senarai Pergerakan Gaji">@Html.DisplayFor(model => Model.ElementAt(item).HR_NAMA_PEKERJA)</a>
                                                        <br />
                                                        <strong>No KP :</strong> @Html.DisplayFor(model => Model.ElementAt(item).HR_NO_KPBARU)
                                                        <br />
                                                        <strong>No Pekerja :</strong> @Html.DisplayFor(model => Model.ElementAt(item).HR_NO_PEKERJA)

                                                    </td>
                                                    <td valign="middle">
                                                        @*@if (Model.ElementAt(item).CHECKED == 1)
                                                            {*@
                                                        <div class="col col-12">
                                                            <label class="radio">
                                                                @Html.RadioButton("[" + item + "].HR_JENIS_PERGERAKAN2", "D", isChecked: (Model.ElementAt(item).HR_JENIS_PERGERAKAN == "D") ? true : false, htmlAttributes: new { @class = "form-control HR_JENIS_PERGERAKAN2" })
                                                                <i></i>Mendatar
                                                            </label>
                                                            <label class="radio">
                                                                @Html.RadioButton("[" + item + "].HR_JENIS_PERGERAKAN2", "S", isChecked: (Model.ElementAt(item).HR_JENIS_PERGERAKAN == "S") ? true : false, htmlAttributes: new { @class = "form-control HR_JENIS_PERGERAKAN2" })
                                                                <i></i>Statik
                                                            </label>
                                                            <label class="radio">
                                                                @Html.RadioButton("[" + item + "].HR_JENIS_PERGERAKAN2", "J", isChecked: (Model.ElementAt(item).HR_JENIS_PERGERAKAN == "J") ? true : false, htmlAttributes: new { @class = "form-control HR_JENIS_PERGERAKAN2" })
                                                                <i></i>Anjakan
                                                            </label>
                                                        </div>
                                                        @*}
                                                            else
                                                            {
                                                                <div class="inline-group">
                                                                    <label class="radio">
                                                                        @Html.RadioButton("[" + item + "].HR_JENIS_PERGERAKAN2", "D", isChecked: (Model.ElementAt(item).HR_JENIS_PERGERAKAN == "D") ? true : false, htmlAttributes: new { @class = "form-control HR_JENIS_PERGERAKAN2", @readonly = "readonly" })
                                                                        <i></i>Mendatar
                                                                    </label>
                                                                    <label class="radio">
                                                                        @Html.RadioButton("[" + item + "].HR_JENIS_PERGERAKAN2", "S", isChecked: (Model.ElementAt(item).HR_JENIS_PERGERAKAN == "S") ? true : false, htmlAttributes: new { @class = "form-control HR_JENIS_PERGERAKAN2", @readonly = "readonly" })
                                                                        <i></i>Statik
                                                                    </label>
                                                                    <label class="radio">
                                                                        @Html.RadioButton("[" + item + "].HR_JENIS_PERGERAKAN2", "J", isChecked: (Model.ElementAt(item).HR_JENIS_PERGERAKAN == "J") ? true : false, htmlAttributes: new { @class = "form-control HR_JENIS_PERGERAKAN2", @readonly = "readonly" })
                                                                        <i></i>Anjakan
                                                                    </label>
                                                                </div>
                                                            }*@
                                                    </td>
                                                    <td valign="middle">
                                                        <strong>Lama :</strong>
                                                        <br />
                                                        <label class="input">
                                                            @Html.TextBox("[" + item + "].HR_GRED_LAMA2", Model.ElementAt(item).HR_GRED_LAMA, new { @class = "form-control HR_GRED_LAMA2", disabled = "disabled" })
                                                        </label>
                                                        <br />
                                                        <strong>Baru :</strong>
                                                        <br />
                                                        <label class="input">
                                                            @Html.TextBox("[" + item + "].HR_GRED2", Model.ElementAt(item).HR_GRED, new { @class = "form-control HR_GRED2", list = "list-gred", autocomplete = "off", @readonly = "readonly" })
                                                            <datalist id="list-gred">
                                                                @foreach (GE_PARAMTABLE gred in ViewBag.gred)
                                                                {
                                                                    <option value="@gred.SHORT_DESCRIPTION" data-value="@gred.ORDINAL">@gred.ORDINAL</option>
                                                                }
                                                            </datalist>
                                                        </label>
                                                    </td>
                                                    <td valign="middle">
                                                        <strong>Min Baru:</strong>
                                                        <br />
                                                        <label class="input">
                                                            @Html.TextBox("[" + item + "].HR_GAJI_MIN2", Model.ElementAt(item).HR_GAJI_MIN, new { @class = "form-control HR_GAJI_MIN2", list = "list-min", autocomplete = "off", @readonly = "readonly" })
                                                            <datalist id="list-min"></datalist>
                                                        </label>
                                                        <br />
                                                        <strong>Max Baru:</strong>
                                                        <br />
                                                        <label class="input">
                                                            @Html.TextBox("[" + item + "].HR_GAJI_MAX2", Model.ElementAt(item).HR_GAJI_MAX, new { @class = "form-control HR_GAJI_MAX2", list = "list-max", autocomplete = "off", @readonly = "readonly" })
                                                            <datalist id="list-max"></datalist>
                                                        </label>
                                                    </td>
                                                    <td valign="middle">
                                                        <strong>Gaji Lama :</strong>
                                                        <br />
                                                        <label class="input">
                                                            @Html.TextBox("[" + item + "].HR_GAJI_LAMA2", Model.ElementAt(item).HR_GAJI_LAMA, new { @class = "form-control HR_GAJI_LAMA2", disabled = "disabled" })
                                                        </label>
                                                        <br />
                                                        <strong>Gaji Baru :</strong>
                                                        <br />
                                                        <label class="input">
                                                            @Html.TextBox("[" + item + "].HR_GAJI_BARU2", Model.ElementAt(item).HR_GAJI_BARU, new { @class = "form-control HR_GAJI_BARU2", id = "HR_GAJI_BARU2", list = "list-gaji", autocomplete = "off", @readonly = "readonly" })
                                                            <datalist id="list-gaji"></datalist>
                                                        </label>
                                                        <br />
                                                        <strong>Perubahan :</strong>
                                                        <br />
                                                        <label class="input">
                                                            @Html.TextBox("[" + item + "].HR_JUMLAH_PERUBAHAN2", Model.ElementAt(item).HR_JUMLAH_PERUBAHAN, new { @class = "form-control HR_JUMLAH_PERUBAHAN2", @readonly = "readonly" })
                                                        </label>
                                                    </td>
                                                    <td valign="middle">
                                                        <strong>Lama :</strong>
                                                        <br />
                                                        <label class="input">
                                                            @Html.TextBox("[" + item + "].HR_MATRIKS_GAJI_LAMA2", Model.ElementAt(item).HR_MATRIKS_GAJI_LAMA, new { @class = "form-control HR_MATRIKS_GAJI_LAMA2", disabled = "disabled" })
                                                        </label>
                                                        <br />
                                                        <strong>Baru :</strong>
                                                        <br />
                                                        <label class="input">
                                                            @Html.TextBox("[" + item + "].HR_MATRIKS_GAJI2", Model.ElementAt(item).HR_MATRIKS_GAJI, new { @class = "form-control HR_MATRIKS_GAJI2", @readonly = "readonly" })
                                                        </label>
                                                    </td>
                                                    <td valign="middle">
                                                        <strong>Nilai % :</strong>
                                                        <br />
                                                        <label class="input">
                                                            @Html.Hidden("[" + item + "].HR_KOD_KRITIKAL2", Model.ElementAt(item).HR_KOD_KRITIKAL, new { @class = "form-control HR_KOD_KRITIKAL2" })
                                                            @Html.TextBox("[" + item + "].HR_KRITIKAL2", Model.ElementAt(item).HR_KRITIKAL, new { @class = "form-control HR_KRITIKAL2" })
                                                        </label>
                                                        <br />
                                                        <strong>Perubahan :</strong>
                                                        <br />
                                                        <label class="input">
                                                            @Html.TextBox("[" + item + "].HR_PERUBAHAN_KRITIKAL2", Model.ElementAt(item).HR_PERUBAHAN_KRITIKAL, new { @class = "form-control HR_PERUBAHAN_KRITIKAL2", @readonly = "readonly" })
                                                        </label>
                                                        <br />
                                                        <strong>Pergerakan :</strong>
                                                        <br />
                                                        <label class="input">
                                                            @Html.TextBox("[" + item + "].HR_PERGERAKAN_EKAL2", Model.ElementAt(item).HR_PERGERAKAN_EKAL, new { @class = "form-control HR_PERGERAKAN_EKAL2", @readonly = "readonly" })
                                                        </label>
                                                    </td>
                                                    <td valign="middle">
                                                        <strong>Nilai % :</strong>
                                                        <br />
                                                        <label class="input">
                                                            @Html.Hidden("[" + item + "].HR_KOD_WILAYAH2", Model.ElementAt(item).HR_KOD_WILAYAH, new { @class = "form-control HR_KOD_WILAYAH2" })
                                                            @Html.TextBox("[" + item + "].HR_WILAYAH2", Model.ElementAt(item).HR_WILAYAH, new { @class = "form-control HR_WILAYAH2" })
                                                        </label>
                                                        <br />
                                                        <strong>Perubahan :</strong>
                                                        <br />
                                                        <label class="input">
                                                            @Html.TextBox("[" + item + "].HR_PERUBAHAN_WILAYAH2", Model.ElementAt(item).HR_PERUBAHAN_WILAYAH, new { @class = "form-control HR_PERUBAHAN_WILAYAH2", @readonly = "readonly" })
                                                        </label>
                                                        <br />
                                                        <strong>Pergerakan :</strong>
                                                        <br />
                                                        <label class="input">
                                                            @Html.TextBox("[" + item + "].HR_PERGERAKAN_EWIL2", Model.ElementAt(item).HR_PERGERAKAN_EWIL, new { @class = "form-control HR_PERGERAKAN_EWIL2", @readonly = "readonly" })
                                                        </label>
                                                    </td>
                                                </tr>


                                            }
                                        </tbody>
                                    </table>
                                </fieldset>
                            }

                            @using (Html.BeginForm("PergerakanGaji", "Kewangan8", FormMethod.Post, new { id = "form-pergerakangaji" }))
                            {
                                List<HR_MAKLUMAT_PERIBADI> sPegawai = (List<HR_MAKLUMAT_PERIBADI>)ViewBag.sPegawai;
                                @Html.AntiForgeryToken()
                                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                                @Html.Hidden("key2", (string)ViewBag.key)
                                @Html.Hidden("value2", (string)ViewBag.value)
                                @Html.Hidden("bulan2", (int?)ViewBag.bulan)
                                @Html.Hidden("btnSub", null)
                                <div class="modal fade" id="Modal" tabindex="-1" role="dialog">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div id='ModalContent'>
                                                <div class="modal-header">
                                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                                        &times;
                                                    </button>
                                                    <h4 class="modal-title">
                                                        <span id="tajukModel">Tambah</span> Pergerakan Gaji <span class="error"></span>
                                                    </h4>
                                                </div>
                                                <div class="modal-body no-padding smart-form">
                                                    <div id="getChecked"></div>
                                                    <fieldset id="bodyHidden">
                                                        <section>
                                                            <div class="row">
                                                                <label class="label col col-4">Jenis Perubahan</label>
                                                                <div class="col col-8">
                                                                    <label class="input">
                                                                        @Html.Hidden("HR_KOD_PERUBAHAN", null)
                                                                        @Html.TextBox("HR_PENERANGAN", null, new { @class = "form-control", disabled = "disabled" })
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </section>

                                                        <section>
                                                            <div class="row">
                                                                <label class="label col col-4">No. Surat Kebenaran</label>
                                                                <div class="col col-8">
                                                                    <label class="input">
                                                                        @Html.TextBox("HR_NO_SURAT_KEBENARAN", null, new { @class = "form-control" })
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </section>

                                                        <section>
                                                            <div class="row">
                                                                <label class="label col col-4">Butir-Butir Perubahan</label>
                                                                <div class="col col-8">
                                                                    <label class="textarea textarea-resizable">
                                                                        @Html.TextArea("HR_BUTIR_PERUBAHAN", null, new { @class = "form -control custom-scroll", rows = "5" })
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </section>

                                                        <section>
                                                            <div class="row">
                                                                <label class="label col col-4">Nama Pegawai Pengesahan</label>
                                                                <div class="col col-8">
                                                                    <label class="input">
                                                                        @Html.Hidden("HR_NP_FINALISED_HR", null)
                                                                        @Html.TextBox("HR_NAMA_PEGAWAI", (string)ViewBag.HR_NAMA_PEGAWAI, new { @class = "form-control", list = "list-pegawai", autocomplete = "off" })
                                                                        <datalist id="list-pegawai">
                                                                            @foreach (var pegawai in sPegawai)
                                                                            {
                                                                                <option value="@(pegawai.HR_NAMA_PEKERJA)" data-value="@pegawai.HR_NO_PEKERJA"></option>
                                                                            }
                                                                        </datalist>

                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </section>

                                                        <div id="statusdata">
                                                            <section>
                                                                <div class="row">
                                                                    <label class="label col col-4">Status Data</label>
                                                                    <div class="col col-8">
                                                                        <label class="select">
                                                                            @Html.DropDownList("HR_FINALISED_IND_HR", new SelectList(ViewBag.pengesahan, "Value", "Text"), new { @class = "form-control" })
                                                                            <i></i>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                            </section>
                                                        </div>
                                                    </fieldset>

                                                    <fieldset id="bodyHidden2">
                                                        <section>
                                                            <div class="row">
                                                                <label class="label col col-4">Tarikh Mesyuarat PPSM</label>
                                                                <div class="col col-4">
                                                                    <label class="input">
                                                                        @Html.TextBox("TARIKH_BERSIDANG", null, new { @class = "form-control", id = "TARIKH_BERSIDANG", @readonly = "readonly" })
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </section>
                                                    </fieldset>
                                                    <footer>
                                                        <button type="submit" id="btn" class="btn btn-primary">
                                                            <span class="fa fa-save"></span> Simpan
                                                        </button>
                                                        <button type="reset" class="btn btn-default">
                                                            Reset
                                                        </button>
                                                        <button type="button" class="btn btn-default" data-dismiss="modal">
                                                            Kembali
                                                        </button>
                                                    </footer>


                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }

                        </div>
                    </div>
                </div>
            </article>

        </div>
    </section>
</div>
@section pagespecific {
    <script type="text/javascript">

        // DO NOT REMOVE : GLOBAL FUNCTIONS!

        $(document).ready(function () {

            /* // DOM Position key index //

            l - Length changing (dropdown)
            f - Filtering input (search)
            t - The Table! (datatable)
            i - Information (records)
            p - Pagination (paging)
            r - pRocessing
            < and > - div elements
            <"#id" and > - div with an id
            <"class" and > - div with a class
            <"#id.class" and > - div with an id and class

            Also see: http://legacy.datatables.net/usage/features
            */

            /* BASIC ;*/
            var responsiveHelper_dt_basic = undefined;
            var responsiveHelper_datatable_fixed_column = undefined;
            var responsiveHelper_datatable_col_reorder = undefined;
            var responsiveHelper_datatable_tabletools = undefined;
            var responsiveHelper_datatable_tabletools2 = undefined;

            var breakpointDefinition = {
                desktop: Infinity,
                tablet: 1024,
                phone: 480
            };

            $('#dt_basic').dataTable({
                "sDom": "<'dt-toolbar'<'col-xs-12 col-sm-6'f><'col-sm-6 col-xs-12 hidden-xs'l>r>" +
                    "t" +
                    "<'dt-toolbar-footer'<'col-sm-6 col-xs-12 hidden-xs'i><'col-xs-12 col-sm-6'p>>",
                "autoWidth": true,
                "preDrawCallback": function () {
                    // Initialize the responsive datatables helper once.
                    if (!responsiveHelper_dt_basic) {
                        responsiveHelper_dt_basic = new ResponsiveDatatablesHelper($('#dt_basic'), breakpointDefinition);
                    }
                },
                "rowCallback": function (nRow) {
                    responsiveHelper_dt_basic.createExpandIcon(nRow);
                },
                "drawCallback": function (oSettings) {
                    responsiveHelper_dt_basic.respond();
                }
            });

            /* END BASIC */

            /* COLUMN FILTER  */
            var otable = $('#datatable_fixed_column').DataTable({
                //"bFilter": false,
                //"bInfo": false,
                //"bLengthChange": false
                //"bAutoWidth": false,
                //"bPaginate": false,
                //"bStateSave": true // saves sort state using localStorage
                "sDom": "<'dt-toolbar'<'col-xs-12 col-sm-6 hidden-xs'f><'col-sm-6 col-xs-12 hidden-xs'<'toolbar'>>r>" +
                        "t" +
                        "<'dt-toolbar-footer'<'col-sm-6 col-xs-12 hidden-xs'i><'col-xs-12 col-sm-6'p>>",
                "autoWidth": true,
                "preDrawCallback": function () {
                    // Initialize the responsive datatables helper once.
                    if (!responsiveHelper_datatable_fixed_column) {
                        responsiveHelper_datatable_fixed_column = new ResponsiveDatatablesHelper($('#datatable_fixed_column'), breakpointDefinition);
                    }
                },
                "rowCallback": function (nRow) {
                    responsiveHelper_datatable_fixed_column.createExpandIcon(nRow);
                },
                "drawCallback": function (oSettings) {
                    responsiveHelper_datatable_fixed_column.respond();
                }

            });

            // custom toolbar
            $("div.toolbar").html('<div class="text-right"><img src="/Content/img/logo.png" alt="SmartAdmin" style="width: 111px; margin-top: 3px; margin-right: 10px;"></div>');

            // Apply the filter
            $("#datatable_fixed_column thead th input[type=text]").on('keyup change', function () {

                otable
                    .column($(this).parent().index() + ':visible')
                    .search(this.value)
                    .draw();

            });
            /* END COLUMN FILTER */

            /* COLUMN SHOW - HIDE */
            $('#datatable_col_reorder').dataTable({
                "sDom": "<'dt-toolbar'<'col-xs-12 col-sm-6'f><'col-sm-6 col-xs-6 hidden-xs'C>r>" +
                        "t" +
                        "<'dt-toolbar-footer'<'col-sm-6 col-xs-12 hidden-xs'i><'col-sm-6 col-xs-12'p>>",
                "autoWidth": true,
                "preDrawCallback": function () {
                    // Initialize the responsive datatables helper once.
                    if (!responsiveHelper_datatable_col_reorder) {
                        responsiveHelper_datatable_col_reorder = new ResponsiveDatatablesHelper($('#datatable_col_reorder'), breakpointDefinition);
                    }
                },
                "rowCallback": function (nRow) {
                    responsiveHelper_datatable_col_reorder.createExpandIcon(nRow);
                },
                "drawCallback": function (oSettings) {
                    responsiveHelper_datatable_col_reorder.respond();
                }
            });

            /* END COLUMN SHOW - HIDE */

            /* TABLETOOLS */
            var table4 = $('#datatable_tabletools').dataTable({

                // Tabletools options:
                //   https://datatables.net/extensions/tabletools/button_options
                "sDom": "<'dt-toolbar'<'col-xs-12 col-sm-4'f><'col-xs-12 col-sm-4'<'btn-jenis'>><'col-sm-4 col-xs-12 hidden-xs'l<'btn-add'>>r>" +
                        "t" +
                        "<'dt-toolbar-footer'<'col-sm-6 col-xs-12 hidden-xs'i><'col-sm-6 col-xs-12 text-right selected'><'col-sm-6 col-xs-12'p>>",
                /*"oTableTools": {
                    "aButtons": [
                    "copy",
                    "csv",
                    "xls",
                       {
                           "sExtends": "pdf",
                           "sTitle": "SmartAdmin_PDF",
                           "sPdfMessage": "SmartAdmin PDF Export",
                           "sPdfSize": "letter"
                       },
                       {
                           "sExtends": "print",
                           "sMessage": "Generated by SmartAdmin <i>(press Esc to close)</i>"
                       }
                    ],
                    "sSwfPath": "/Scripts/plugin/datatables/swf/copy_csv_xls_pdf.swf"
                },*/
                "language": {
                    "zeroRecords": "Tiada data dijumpai",
                    "info": "Memaparkan <span class='txt-color-darken'>_START_</span> hingga <span class='txt-color-darken'>_END_</span> daripada <span class='text-primary'>_TOTAL_</span> rekod",
                    "infoEmpty": "Tiada data",
                    "infoFiltered": "(ditapis daripada <span class='text-primary'>_MAX_</span> jumlah rekod)"
                },
                "lengthMenu": [[10, 50, 100, -1], [10, 50, 100, "Semua"]],
                'iDisplayLength': -1,
                //"bSortClasses": false,
                "scrollY": "700px",
                "scrollX": true,
                "scrollCollapse": true,
                "paging": false,
                "autoWidth": false,
                "preDrawCallback": function () {
                    // Initialize the responsive datatables helper once.
                    if (!responsiveHelper_datatable_tabletools) {
                        responsiveHelper_datatable_tabletools = new ResponsiveDatatablesHelper($('#datatable_tabletools'), breakpointDefinition);
                    }
                },
                "rowCallback": function (nRow) {
                    responsiveHelper_datatable_tabletools.createExpandIcon(nRow);
                },
                "drawCallback": function (oSettings) {
                    responsiveHelper_datatable_tabletools.respond();
                }
            });

            var disabled
            if (parseInt('@m') > 0) {

                $("div.btn-add").html('<div class="text-right">' +
                    '<button type = "button" name = "Tambah" id = "btn-tambah" class = "btn btn-default btn-success" title = "Tambah Pergerakan Gaji" ><i class = "fa fa-plus"></i></button>' +
                    '</div>');

                $("div.btn-jenis").html('<div class = "smart-form"><div class="inline-group">' +
                                            '<label class="radio">' +
                                                '<input type="radio" name="jenisPergerakan" value="D" id="add" checked="checked" >' +
                                                '<i></i>Mendatar' +
                                            '</label>' +
                                            '<label class="radio">' +
                                                '<input type="radio" name="jenisPergerakan" value="S" id="add" >' +
                                                '<i></i>Statik' +
                                            '</label>' +
                                            '<label class="radio">' +
                                                '<input type="radio" name="jenisPergerakan" value="J" id="add" >' +
                                                '<i></i>Anjakan' +
                                            '</label>' +
                                        '</div></div>');
            }

            $("div.selected").html('<div style="padding-top: 9px; font-size: 13px; font-weight: 700; font-style: italic; color: #969696;">' +
                                    'Jumlah pekerja yang dipilih : <span class="txt-color-darken" id="jumPilih">@(m)</span>' +
                                    '</div>');

            /* END TABLETOOLS */

            /* END COLUMN SHOW - HIDE */

            /* TABLETOOLS */
            var table5 = $('#datatable_tabletools2').dataTable({

                // Tabletools options:
                //   https://datatables.net/extensions/tabletools/button_options
                "sDom": "<'dt-toolbar'<'col-xs-12 col-sm-4'f><'col-xs-12 col-sm-4'<'btn-jenis2'>><'col-sm-4 col-xs-12 hidden-xs'l<'btn-edit'>>r>" +
                        "t" +
                        "<'dt-toolbar-footer'<'col-sm-6 col-xs-12 hidden-xs'i><'col-sm-6 col-xs-12 text-right selected2'><'col-sm-6 col-xs-12'p>>",
                /*"oTableTools": {
                    "aButtons": [
                    "copy",
                    "csv",
                    "xls",
                       {
                           "sExtends": "pdf",
                           "sTitle": "SmartAdmin_PDF",
                           "sPdfMessage": "SmartAdmin PDF Export",
                           "sPdfSize": "letter"
                       },
                       {
                           "sExtends": "print",
                           "sMessage": "Generated by SmartAdmin <i>(press Esc to close)</i>"
                       }
                    ],
                    "sSwfPath": "/Scripts/plugin/datatables/swf/copy_csv_xls_pdf.swf"
                },*/
                "language": {
                    "zeroRecords": "Tiada data dijumpai",
                    "info": "Memaparkan <span class='txt-color-darken'>_START_</span> hingga <span class='txt-color-darken'>_END_</span> daripada <span class='text-primary'>_TOTAL_</span> rekod",
                    "infoEmpty": "Tiada data",
                    "infoFiltered": "(ditapis daripada <span class='text-primary'>_MAX_</span> jumlah rekod)"
                },
                "lengthMenu": [[10, 50, 100, -1], [10, 50, 100, "Semua"]],
                'iDisplayLength': -1,
                //"bSortClasses": false,
                "scrollY": "700px",
                "scrollX": true,
                "scrollCollapse": true,
                "paging": false,
                "autoWidth": false,
                "preDrawCallback": function () {
                    // Initialize the responsive datatables helper once.
                    if (!responsiveHelper_datatable_tabletools2) {
                        responsiveHelper_datatable_tabletools2 = new ResponsiveDatatablesHelper($('#datatable_tabletools2'), breakpointDefinition);
                    }
                },
                "rowCallback": function (nRow) {
                    responsiveHelper_datatable_tabletools2.createExpandIcon(nRow);
                },
                "drawCallback": function (oSettings) {
                    responsiveHelper_datatable_tabletools2.respond();
                }
            });

            //$("div.btn-edit").html('<div class="text-right">' +
            //    '<div class="btn-group" role="group" aria-label="Basic example">' +
            //    '<button type = "button" name = "Muktamad" id = "btn-muktamad" class = "btn btn-warning" title = "Muktamad Pergerakan Gaji"><i class = "fa fa-edit"></i> Muktamad</button>' +
            //    '<button type = "button" name = "Edit" id = "btn-edit" class = "btn btn-success" title = "Kemaskini Pergerakan Gaji"><i class = "fa fa-edit"></i></button>' +
            //    '</div>' +
            //    '</div>');

            $("div.btn-jenis2").html('<div class = "smart-form"><div class="inline-group">' +
                                        '<label class="radio">' +
                                            '<input type="radio" name="jenisPergerakan2" value="D" id="edit" checked="checked">' +
                                            '<i></i>Mendatar' +
                                        '</label>' +
                                        '<label class="radio">' +
                                            '<input type="radio" name="jenisPergerakan2" value="S" id="edit">' +
                                            '<i></i>Statik' +
                                        '</label>' +
                                        '<label class="radio">' +
                                            '<input type="radio" name="jenisPergerakan2" value="J" id="edit">' +
                                            '<i></i>Anjakan' +
                                        '</label>' +
                                    '</div></div>');

            $("div.selected2").html('<div style="padding-top: 9px; font-size: 13px; font-weight: 700; font-style: italic; color: #969696;">' +
                'Jumlah pekerja yang dipilih : <span class="txt-color-darken" id="jumPilih2">@(ViewBag.belumMuktamad)</span>' +
                '</div>');

            /* END TABLETOOLS */

            @*if('@ViewBag.key' == "1")
            {
                $.ajax({
                    type: "GET",
                    url: "../Kewangan8/TableKew8",
                    contentType: "application/json; charset=utf-8",
                    data: { "Id": '@ViewBag.value', "key": '@ViewBag.key', "value": '@ViewBag.value', "kod" : "00025" },
                    //datatype: "html",
                    success: function (data) {
                        //view.css({ "display": "none" });
                        $("#lihatInfo").removeClass("lihatInfo").addClass("tutupInfo");
                        $("#lihatInfo").text("Tutup Info");
                        //view.parents(".parentView").find("#formpergerakangaji").addClass("hide");
                        $("#showTable").html(data)
                    },
                    error: function () {
                        alert("Dynamic content load failed.");
                    }
                });
            }*@

            @*$(document).on("click", ".lihatInfo", function () {
                var view = $(this);
                var $buttonClicked = $(this);
                var id = $buttonClicked.attr('data-id');

                if ('@ViewBag.key' == "2") {
                    window.location = "../Kewangan8/TahanGaji?key=1&value=" + id + "&kod=00025";
                }
                else {
                    $.ajax({
                        type: "GET",
                        url: "../Kewangan8/TableKew8",
                        contentType: "application/json; charset=utf-8",
                        data: { "Id": id, "key": '@ViewBag.key', "value": '@ViewBag.value', "kod" : "00025" },
                        //datatype: "html",
                        success: function (data) {
                            //view.css({ "display": "none" });
                            view.removeClass("lihatInfo").addClass("tutupInfo");
                            view.text("Tutup Info");
                            //view.parents(".parentView").find("#formpergerakangaji").addClass("hide");
                            $("#showTable").html(data)
                        },
                        error: function () {
                            alert("Dynamic content load failed.");
                        }
                    });
                }

            }).on("click", ".tutupInfo", function () {
                $(this).removeClass("tutupInfo").addClass("lihatInfo");
                $(this).text("Lihat Info");
                //$(this).parents(".parentView").find("#formpergerakangaji").removeClass("hide");
                $("#showTable").html("")


            });*@


            $('#TARIKH_BERSIDANG').datepicker({
                changeMonth: true,
                changeYear: true,
                dateFormat: 'dd/mm/yy',
                prevText: '<i class="fa fa-chevron-left"></i>',
                nextText: '<i class="fa fa-chevron-right"></i>',
                onSelect: function (selectedDate) {
                    //$('#HR_TARIKH_MULA').datepicker('option', 'maxDate', selectedDate);
                }
            });


            $("#HR_NAMA_PEGAWAI").on('input', function () {
                $("#statusdata").html("");
                if ($(this).val().length >= 4) {
                    $.get("../Kewangan8/CariPegawai2", { HR_NP_FINALISED_HR: $("#HR_NAMA_PEGAWAI").val() }, function (data) {
                        if (data != false) {
                            $("#HR_NAMA_PEGAWAI").val(data.HR_NAMA_PEKERJA);
                            $("#HR_NP_FINALISED_HR").val(data.HR_NO_PEKERJA);

                            if ('@ViewBag.HR_NAMA_PEGAWAI' == data.HR_NAMA_PEKERJA) {
                                var html = '<section>' +
                                                '<div class="row">' +
                                                    '<label class="label col col-4">Status Data</label>' +
                                                    '<div class="col col-8">' +
                                                        '<label class="select">' +
                                                            '<select class="form-control" id="HR_FINALISED_IND_HR" name="HR_FINALISED_IND_HR">' +
                                                                '<option value="T">Tidak Aktif</option>' +
                                                                '<option value="P">Proses</option>' +
                                                                '<option value="Y">Muktamad</option>' +
                                                            '<select>' +
                                                        '</label>' +
                                                    '</div>' +
                                                '</div>' +
                                            '</section>';
                                $("#statusdata").html(html);
                            }
                            else {
                                $("#statusdata").html("");
                            }
                        }
                    })
                }

            });

            $("#HR_NAMA_PEGAWAI").on("click", function () {
                $(this).focus(function () { $(this).select(); });
            })

            $(".HR_NO_PEKERJA2").on("click", this, function () {
                var VIEW = $(this).parents("tr:not(.success)");
                if ($(this).is(':checked') == true) {
                    VIEW.find("td .HR_JENIS_PERGERAKAN2").removeAttr("disabled");
                    VIEW.find("td .HR_GRED2").removeAttr("disabled");
                    VIEW.find("td .HR_GAJI_MIN2").removeAttr("disabled");
                    VIEW.find("td .HR_GAJI_MAX2").removeAttr("disabled");
                    VIEW.find("td .HR_GAJI_BARU2").removeAttr("disabled");
                    VIEW.find("td .HR_MATRIKS_GAJI2").removeAttr("disabled").attr("readonly", "readonly");
                    VIEW.find("td .HR_JUMLAH_PERUBAHAN2").removeAttr("disabled").attr("readonly", "readonly");
                    if (VIEW.find("td .HR_JENIS_PERGERAKAN2:checked").val() != "J") {
                        VIEW.find("td .HR_GRED2").attr("readonly", "readonly");
                        VIEW.find("td .HR_GAJI_MIN2").attr("readonly", "readonly");
                        VIEW.find("td .HR_GAJI_MAX2").attr("readonly", "readonly");
                        VIEW.find("td .HR_GAJI_BARU2").attr("readonly", "readonly");
                    }
                }
                else {
                    VIEW.find("td .HR_JENIS_PERGERAKAN2").attr("disabled", "disabled");
                    VIEW.find("td .HR_GRED2").attr("disabled", "disabled");
                    VIEW.find("td .HR_GAJI_MIN2").attr("disabled", "disabled");
                    VIEW.find("td .HR_GAJI_MAX2").attr("disabled", "disabled");
                    VIEW.find("td .HR_GAJI_BARU2").attr("disabled", "disabled");
                    VIEW.find("td .HR_MATRIKS_GAJI2").attr("disabled", "disabled");
                    VIEW.find("td .HR_JUMLAH_PERUBAHAN2").attr("disabled", "disabled");
                }
            });

            function JenisPergerakanBtn(VIEW, VALUE) {

                var HR_PERUBAHAN_KRITIKAL = 0;
                var HR_PERUBAHAN_WILAYAH = 0;
                var HR_PERGERAKAN_KRITIKAL = 0;
                var HR_PERGERAKAN_WILAYAH = 0;

                var HR_KRITIKAL2 = parseFloat(VIEW.find("td .HR_KRITIKAL2").val())
                var HR_WILAYAH2 = parseFloat(VIEW.find("td .HR_WILAYAH2").val())

                VIEW.find("td .HR_GAJI_MIN2").val("");
                VIEW.find("td .HR_GAJI_MAX2").val("");
                VIEW.find("td .HR_GAJI_BARU2").val("");
                VIEW.find("td .HR_MATRIKS_GAJI2").val("");
                VIEW.find("td .HR_JUMLAH_PERUBAHAN2").val("");

                if (VIEW.parents("table").attr("id") == "datatable_tabletools2") {
                    VIEW.find("td #list-min2").html('<option></option>');
                    VIEW.find("td #list-max2").html('<option></option>');
                }
                else {
                    VIEW.find("td #list-min").html('<option></option>');
                    VIEW.find("td #list-max").html('<option></option>');
                }

                if (VALUE == "J") {
                    VIEW.find("td .HR_GRED2").removeAttr("readonly");
                    VIEW.find("td .HR_GAJI_MIN2").removeAttr("readonly");
                    VIEW.find("td .HR_GAJI_MAX2").removeAttr("readonly");
                    VIEW.find("td .HR_GAJI_BARU2").removeAttr("readonly");
                    VIEW.find("td .HR_JUMLAH_PERUBAHAN2").removeAttr("readonly");

                    VIEW.find("td .HR_PERUBAHAN_KRITIKAL2").val(HR_PERUBAHAN_KRITIKAL.toFixed(2));
                    VIEW.find("td .HR_PERUBAHAN_WILAYAH2").val(HR_PERUBAHAN_WILAYAH.toFixed(2));
                    VIEW.find("td .HR_PERGERAKAN_EKAL2").val(HR_PERGERAKAN_KRITIKAL.toFixed(2));
                    VIEW.find("td .HR_PERGERAKAN_EWIL2").val(HR_PERGERAKAN_WILAYAH.toFixed(2));

                    $.ajax({
                        url: "../Kewangan8/GajiMin",
                        type: "GET",
                        data: { HR_GRED: VIEW.find("td .HR_GRED2").val() },
                        dataType: "Json",
                        success: function (data) {
                            $.each(data, function (i, v) {
                                if (VIEW.parents("table").attr("id") == "datatable_tabletools2") {
                                    VIEW.find("td #list-min2").append($("<option></option>").val(v.HR_GAJI_MIN).attr("data-value", v.HR_PERINGKAT))
                                }
                                else {
                                    VIEW.find("td #list-min").append($("<option></option>").val(v.HR_GAJI_MIN).attr("data-value", v.HR_PERINGKAT))
                                }

                            })
                        }
                    });
                }
                else if (VALUE == "S" || VALUE == "D") {
                    VIEW.find("td .HR_GRED2").attr("readonly", "readonly");
                    VIEW.find("td .HR_GAJI_MIN2").attr("readonly", "readonly");
                    VIEW.find("td .HR_GAJI_MAX2").attr("readonly", "readonly");
                    VIEW.find("td .HR_GAJI_BARU2").attr("readonly", "readonly");
                    VIEW.find("td .HR_JUMLAH_PERUBAHAN2").attr("readonly", "readonly");

                    var record = { HR_NO_PEKERJA: VIEW.find("td .HR_NO_PEKERJA2").val(), HR_JENIS_PERGERAKAN: VALUE }
                    if (VIEW.parents("table").attr("id") == "datatable_tabletools2") {
                        record = { HR_NO_PEKERJA: VIEW.find("td .HR_NO_PEKERJA3").val(), HR_JENIS_PERGERAKAN: VALUE }
                    }
                    $.ajax({
                        url: "../Kewangan8/JenisPergerakan",
                        type: "GET",
                        data: record,
                        dataType: "Json",
                        success: function (data) {
                            VIEW.find("td .HR_GRED2").val(data.HR_GRED);
                            VIEW.find("td .HR_GAJI_MIN2").val((parseFloat(data.HR_GAJI_MIN)).toFixed(2));
                            VIEW.find("td .HR_GAJI_MAX2").val((parseFloat(data.HR_GAJI_MAX)).toFixed(2));
                            VIEW.find("td .HR_GAJI_BARU2").val((parseFloat(data.HR_GAJI_BARU)).toFixed(2));
                            VIEW.find("td .HR_MATRIKS_GAJI2").val(data.HR_MATRIKS_GAJI);
                            VIEW.find("td .HR_JUMLAH_PERUBAHAN2").val((parseFloat(data.HR_JUMLAH_PERUBAHAN)).toFixed(2));



                            if (HR_KRITIKAL2 > 0 && (parseFloat(data.HR_JUMLAH_PERUBAHAN)).toFixed(2) > 0) {
                                HR_PERUBAHAN_KRITIKAL = (parseFloat(data.HR_JUMLAH_PERUBAHAN)).toFixed(2) * (HR_KRITIKAL2 / 100);
                            }

                            if (HR_WILAYAH2 > 0 && (parseFloat(data.HR_JUMLAH_PERUBAHAN)).toFixed(2) > 0) {
                                HR_PERUBAHAN_WILAYAH = (parseFloat(data.HR_JUMLAH_PERUBAHAN)).toFixed(2) * (HR_WILAYAH2 / 100);
                            }

                            if (HR_KRITIKAL2 > 0 && (parseFloat(data.HR_GAJI_BARU)).toFixed(2) > 0) {
                                HR_PERGERAKAN_KRITIKAL = (parseFloat(data.HR_GAJI_BARU)).toFixed(2) * (HR_KRITIKAL2 / 100);
                            }

                            if (HR_WILAYAH2 > 0 && (parseFloat(data.HR_GAJI_BARU)).toFixed(2) > 0) {
                                HR_PERGERAKAN_WILAYAH = (parseFloat(data.HR_GAJI_BARU)).toFixed(2) * (HR_WILAYAH2 / 100);
                            }

                            VIEW.find("td .HR_PERUBAHAN_KRITIKAL2").val(HR_PERUBAHAN_KRITIKAL.toFixed(2));
                            VIEW.find("td .HR_PERUBAHAN_WILAYAH2").val(HR_PERUBAHAN_WILAYAH.toFixed(2));
                            VIEW.find("td .HR_PERGERAKAN_EKAL2").val(HR_PERGERAKAN_KRITIKAL.toFixed(2));
                            VIEW.find("td .HR_PERGERAKAN_EWIL2").val(HR_PERGERAKAN_WILAYAH.toFixed(2));
                        }
                    })
                }
            }

            $(".HR_JENIS_PERGERAKAN2, .HR_JENIS_PERGERAKAN3").on("click", this, function () {
                var VIEW = $(this).parents("tr");
                var VALUE = $(this).val();
                JenisPergerakanBtn(VIEW, VALUE);
                //VIEW.find(".HR_GRED").val("");

            });
            var gred = {};
            $("#list-gred option").each(function (i, el) {
                gred[$(el).data("value")] = $(el).val();
            });

            $(".HR_GRED2, .HR_GAJI_MIN2, .HR_GAJI_MAX2, .HR_GAJI_BARU2").on("input", function () {
                var VIEW = $(this).parents("tr");
                VIEW.find("td .HR_MATRIKS_GAJI2").val("");

                if ($(this).attr("id") != "HR_GAJI_BARU2") {
                    VIEW.find("td .HR_GAJI_BARU2").val("");

                    if (VIEW.parents("table").attr("id") == "datatable_tabletools2") {
                        VIEW.find("td #list-gaji2").html('<option></option>');
                    }
                    else {
                        VIEW.find("td #list-gaji").html('<option></option>');
                    }


                    if (VIEW.find("td .HR_GRED2").val() != "" && VIEW.find("td .HR_GAJI_MIN2").val() != "" && VIEW.find("td .HR_GAJI_MAX2").val() != "") {
                        $.ajax({
                            url: "../Kewangan8/GajiPokok",
                            type: "GET",
                            data: { HR_GRED: VIEW.find("td .HR_GRED2").val(), HR_GAJI_MIN: VIEW.find("td .HR_GAJI_MIN2").val(), HR_GAJI_MAX: VIEW.find("td .HR_GAJI_MAX2").val() },
                            dataType: "Json",
                            success: function (data) {
                                $.each(data, function (i, v) {
                                    if (VIEW.parents("table").attr("id") == "datatable_tabletools2") {
                                        VIEW.find("td #list-gaji2").append($("<option>P" + v.HR_PERINGKAT + "T" + (v.HR_TAHAP).toFixed(2) + "</option>").val((parseFloat(v.HR_GAJI_POKOK)).toFixed(2)))
                                    }
                                    else {
                                        VIEW.find("td #list-gaji").append($("<option>P" + v.HR_PERINGKAT + "T" + (v.HR_TAHAP).toFixed(2) + "</option>").val((parseFloat(v.HR_GAJI_POKOK)).toFixed(2)))
                                    }
                                })
                            }
                        })
                    }
                }
                if (VIEW.find("td .HR_GRED2").val() != "" && VIEW.find("td .HR_GAJI_BARU2").val() != "") {
                    $.ajax({
                        url: "../Kewangan8/KodMatriks",
                        type: "GET",
                        data: { HR_GRED: VIEW.find("td .HR_GRED2").val(), HR_GAJI_POKOK: VIEW.find("td .HR_GAJI_BARU2").val() },
                        dataType: "Json",
                        success: function (data) {
                            var tahap = parseFloat(data.HR_TAHAP);
                            VIEW.find("td .HR_MATRIKS_GAJI2").val("P" + data.HR_PERINGKAT + "T" + (parseFloat(tahap)).toFixed(2))
                        }
                    })
                }

            })

            $(".HR_GRED2").on('input', function () {
                var VIEW = $(this).parents("tr");
                VIEW.find("td .HR_GAJI_MIN2").val("");
                VIEW.find("td .HR_GAJI_MAX2").val("");
                VIEW.find("td .HR_JUMLAH_PERUBAHAN2").val("");
                VIEW.find("td .HR_GAJI_BARU2").val("");
                VIEW.find("td .HR_MATRIKS_GAJI2").val("");

                if (VIEW.parents("table").attr("id") == "datatable_tabletools2") {
                    VIEW.find("td #list-min2").html('<option></option>');
                    VIEW.find("td #list-max2").html('<option></option>');
                    VIEW.find("td #list-gaji2").html('<option></option>');
                }
                else {
                    VIEW.find("td #list-min").html('<option></option>');
                    VIEW.find("td #list-max").html('<option></option>');
                    VIEW.find("td #list-gaji").html('<option></option>');
                }

                var value = $(this).val();
                $.ajax({
                    url: "../Kewangan8/GajiMin",
                    type: "GET",
                    data: { HR_GRED: value },
                    dataType: "Json",
                    success: function (data) {
                        $.each(data, function (i, v) {
                            if (VIEW.parents("table").attr("id") == "datatable_tabletools2") {
                                VIEW.find("td #list-min2").append($("<option></option>").val((parseFloat(v.HR_GAJI_MIN)).toFixed(2)).attr("data-value", v.HR_PERINGKAT))
                            }
                            else {
                                VIEW.find("td #list-min").append($("<option></option>").val((parseFloat(v.HR_GAJI_MIN)).toFixed(2)).attr("data-value", v.HR_PERINGKAT))
                            }
                        })

                    }
                })
            });


            $(".HR_GAJI_MIN2").on('input', function () {
                var VIEW = $(this).parents("tr");
                VIEW.find("td .HR_GAJI_MAX2").val("");
                VIEW.find("td .HR_JUMLAH_PERUBAHAN2").val("");
                VIEW.find("td .HR_GAJI_BARU2").val("");

                if (VIEW.parents("table").attr("id") == "datatable_tabletools2") {
                    VIEW.find("td #list-max2").html('<option></option>');
                    VIEW.find("td #list-gaji2").html('<option></option>');
                }
                else {
                    VIEW.find("td #list-max").html('<option></option>');
                    VIEW.find("td #list-gaji").html('<option></option>');
                }

                var value = $(this).val();
                $.ajax({
                    url: "../Kewangan8/GajiMax",
                    type: "GET",
                    data: { HR_GAJI_MIN: $(this).val(), HR_GRED: VIEW.find('td .HR_GRED2').val() },
                    dataType: "Json",
                    success: function (data) {
                        $.each(data, function (i, v) {
                            if (VIEW.parents("table").attr("id") == "datatable_tabletools2") {
                                VIEW.find("td #list-max2").append($("<option></option>").val((parseFloat(v.HR_GAJI_MAX)).toFixed(2)).attr("data-value", v.HR_TAHAP))
                            }
                            else {
                                VIEW.find("td #list-max").append($("<option></option>").val((parseFloat(v.HR_GAJI_MAX)).toFixed(2)).attr("data-value", v.HR_TAHAP))
                            }
                        })

                    }
                })
            });

            $(".HR_GAJI_BARU2").on('input', function () {
                var VIEW = $(this).parents("tr");
                VIEW.find(".HR_JUMLAH_PERUBAHAN2").val("");
                VIEW.find("td .HR_MATRIKS_GAJI2").val("");
                var value = $(this).val();
                $.ajax({
                    url: "../Kewangan8/PerubahanGaji",
                    type: "GET",
                    data: { HR_NO_PEKERJA: VIEW.find("td .HR_NO_PEKERJA2").val(), HR_GAJI_BARU: $(this).val() },
                    dataType: "Json",
                    success: function (data) {
                        VIEW.find("td .HR_JUMLAH_PERUBAHAN2").val((parseFloat(data)).toFixed(2))

                    }
                })
            });
            $("input[name='pilihPekerja'], input[name='pilihPekerja2']").on("click", function () {
                if ($(this).attr("id") == "add2") {
                    $("#datatable_tabletools .HR_NO_PEKERJA2:not([disabled = 'disabled'])").prop('checked', this.checked);
                    if (this.checked == true) {

                        $("#datatable_tabletools .HR_NO_PEKERJA2:not([disabled = 'disabled'])").attr("checked", "checked")
                        $("#datatable_tabletools tr").each(function () {
                            var VIEW = $(this);
                            VIEW.find("td .HR_JENIS_PERGERAKAN2").removeAttr("disabled");
                            VIEW.find("td .HR_GRED2").removeAttr("disabled");
                            VIEW.find("td .HR_GAJI_MIN2").removeAttr("disabled");
                            VIEW.find("td .HR_GAJI_MAX2").removeAttr("disabled");
                            VIEW.find("td .HR_GAJI_BARU2").removeAttr("disabled");
                            VIEW.find("td .HR_MATRIKS_GAJI2").removeAttr("disabled").attr("readonly", "readonly");
                            VIEW.find("td .HR_JUMLAH_PERUBAHAN2").removeAttr("disabled").attr("readonly", "readonly");

                            VIEW.find("td .HR_WILAYAH2").removeAttr("disabled");
                            VIEW.find("td .HR_PERUBAHAN_WILAYAH2").removeAttr("disabled");
                            VIEW.find("td .HR_PERGERAKAN_EWIL2").removeAttr("disabled");

                            VIEW.find("td .HR_KRITIKAL2").removeAttr("disabled");
                            VIEW.find("td .HR_PERUBAHAN_KRITIKAL2").removeAttr("disabled");
                            VIEW.find("td .HR_PERGERAKAN_EKAL2").removeAttr("disabled");

                            if (VIEW.find("td .HR_JENIS_PERGERAKAN2:checked").val() != "J") {
                                VIEW.find("td .HR_GRED2").attr("readonly", "readonly");
                                VIEW.find("td .HR_GAJI_MIN2").attr("readonly", "readonly");
                                VIEW.find("td .HR_GAJI_MAX2").attr("readonly", "readonly");
                                VIEW.find("td .HR_GAJI_BARU2").attr("readonly", "readonly");

                                VIEW.find("td .HR_PERUBAHAN_WILAYAH2").attr("readonly", "readonly");
                                VIEW.find("td .HR_PERGERAKAN_EWIL2").attr("readonly", "readonly");

                                VIEW.find("td .HR_PERUBAHAN_KRITIKAL2").attr("readonly", "readonly");
                                VIEW.find("td .HR_PERGERAKAN_EKAL2").attr("readonly", "readonly");

                            }
                        })
                    }
                    else {

                        $("#datatable_tabletools .HR_NO_PEKERJA2:not([disabled = 'disabled'])").removeAttr("checked")
                        $("#datatable_tabletools tr").each(function () {
                            var VIEW = $(this);
                            VIEW.find("td .HR_JENIS_PERGERAKAN2").attr("disabled", "disabled");
                            VIEW.find("td .HR_GRED2").attr("disabled", "disabled");
                            VIEW.find("td .HR_GAJI_MIN2").attr("disabled", "disabled");
                            VIEW.find("td .HR_GAJI_MAX2").attr("disabled", "disabled");
                            VIEW.find("td .HR_GAJI_BARU2").attr("disabled", "disabled");
                            VIEW.find("td .HR_MATRIKS_GAJI2").attr("disabled", "disabled");
                            VIEW.find("td .HR_JUMLAH_PERUBAHAN2").attr("disabled", "disabled");

                            VIEW.find("td .HR_WILAYAH2").attr("disabled", "disabled");
                            VIEW.find("td .HR_PERUBAHAN_WILAYAH2").attr("disabled", "disabled");
                            VIEW.find("td .HR_PERGERAKAN_EWIL2").attr("disabled", "disabled");

                            VIEW.find("td .HR_KRITIKAL2").attr("disabled", "disabled");
                            VIEW.find("td .HR_PERUBAHAN_KRITIKAL2").attr("disabled", "disabled");
                            VIEW.find("td .HR_PERGERAKAN_EKAL2").attr("disabled", "disabled");
                        })


                    }
                    $("#jumPilih").html($(".HR_NO_PEKERJA2:checked").length);

                    if ($(".HR_NO_PEKERJA2:checked").length <= 0) {
                        $("#btn-tambah").attr("disabled", "disabled")
                    }
                    else {
                        $("#btn-tambah").removeAttr("disabled")
                    }
                }
                else {
                    $("#datatable_tabletools2 .HR_NO_PEKERJA3:not([disabled = 'disabled'])").prop('checked', this.checked);
                    if (this.checked == true) {

                        $("#datatable_tabletools2 .HR_NO_PEKERJA3:not([disabled = 'disabled'])").attr("checked", "checked")
                        $("#datatable_tabletools2 tr:not(.success)").each(function () {
                            var VIEW = $(this);
                            VIEW.find("td .HR_JENIS_PERGERAKAN3").removeAttr("disabled");
                            VIEW.find("td .HR_GRED2").removeAttr("disabled");
                            VIEW.find("td .HR_GAJI_MIN2").removeAttr("disabled");
                            VIEW.find("td .HR_GAJI_MAX2").removeAttr("disabled");
                            VIEW.find("td .HR_GAJI_BARU2").removeAttr("disabled");
                            VIEW.find("td .HR_MATRIKS_GAJI2").removeAttr("disabled").attr("readonly", "readonly");
                            VIEW.find("td .HR_JUMLAH_PERUBAHAN2").removeAttr("disabled").attr("readonly", "readonly");

                            VIEW.find("td .HR_WILAYAH2").removeAttr("disabled");
                            VIEW.find("td .HR_PERUBAHAN_WILAYAH2").removeAttr("disabled");
                            VIEW.find("td .HR_PERGERAKAN_EWIL2").removeAttr("disabled");

                            VIEW.find("td .HR_KRITIKAL2").removeAttr("disabled");
                            VIEW.find("td .HR_PERUBAHAN_KRITIKAL2").removeAttr("disabled");
                            VIEW.find("td .HR_PERGERAKAN_EKAL2").removeAttr("disabled");

                            if (VIEW.find("td .HR_JENIS_PERGERAKAN2:checked").val() != "J") {
                                VIEW.find("td .HR_GRED2").attr("readonly", "readonly");
                                VIEW.find("td .HR_GAJI_MIN2").attr("readonly", "readonly");
                                VIEW.find("td .HR_GAJI_MAX2").attr("readonly", "readonly");
                                VIEW.find("td .HR_GAJI_BARU2").attr("readonly", "readonly");

                                VIEW.find("td .HR_PERUBAHAN_WILAYAH2").attr("readonly", "readonly");
                                VIEW.find("td .HR_PERGERAKAN_EWIL2").attr("readonly", "readonly");

                                VIEW.find("td .HR_PERUBAHAN_KRITIKAL2").attr("readonly", "readonly");
                                VIEW.find("td .HR_PERGERAKAN_EKAL2").attr("readonly", "readonly");
                            }

                            VIEW.find("#btn-edit").removeAttr("disabled")
                            VIEW.find("#btn-padam").removeAttr("disabled")
                            VIEW.find("#btn-cetak").removeAttr("disabled")
                            VIEW.find("#btn-muktamad").removeAttr("disabled")
                        })
                    }
                    else {
                        $("#datatable_tabletools2 .HR_NO_PEKERJA3:not([disabled = 'disabled'])").removeAttr("checked")
                        $("#datatable_tabletools2 tr:not(.success)").each(function () {
                            var VIEW = $(this);
                            VIEW.find("td .HR_JENIS_PERGERAKAN3").attr("disabled", "disabled");
                            VIEW.find("td .HR_GRED2").attr("disabled", "disabled");
                            VIEW.find("td .HR_GAJI_MIN2").attr("disabled", "disabled");
                            VIEW.find("td .HR_GAJI_MAX2").attr("disabled", "disabled");
                            VIEW.find("td .HR_GAJI_BARU2").attr("disabled", "disabled");
                            VIEW.find("td .HR_MATRIKS_GAJI2").attr("disabled", "disabled");
                            VIEW.find("td .HR_JUMLAH_PERUBAHAN2").attr("disabled", "disabled");

                            VIEW.find("td .HR_WILAYAH2").attr("disabled", "disabled");
                            VIEW.find("td .HR_PERUBAHAN_WILAYAH2").attr("disabled", "disabled");
                            VIEW.find("td .HR_PERGERAKAN_EWIL2").attr("disabled", "disabled");

                            VIEW.find("td .HR_KRITIKAL2").attr("disabled", "disabled");
                            VIEW.find("td .HR_PERUBAHAN_KRITIKAL2").attr("disabled", "disabled");
                            VIEW.find("td .HR_PERGERAKAN_EKAL2").attr("disabled", "disabled");

                            VIEW.find("#btn-edit").attr("disabled", "disabled")
                            VIEW.find("#btn-padam").attr("disabled", "disabled")
                            VIEW.find("#btn-cetak").attr("disabled", "disabled")
                            VIEW.find("#btn-muktamad").attr("disabled", "disabled")
                        })
                    }
                    $("#jumPilih2").html($(".HR_NO_PEKERJA3:checked").length);

                    if ($(".HR_NO_PEKERJA3:checked").length <= 0) {
                        $("#btn-edit").attr("disabled", "disabled")
                    }
                    else {
                        $("#btn-edit").removeAttr("disabled")
                    }
                }

            });
            $(".HR_NO_PEKERJA2").on("click", function () {
                var VIEW = $(this).parents("tr");
                if ($(this).is(":checked") == false) {
                    $("input[name='pilihPekerja']").prop('checked', false);
                }
                if ($(".HR_NO_PEKERJA2:checked").length >= '@ViewBag.countKew8') {
                    $("input[name='pilihPekerja']").prop('checked', true);
                }

                if ($(".HR_NO_PEKERJA2:checked").length <= 0) {
                    $("#btn-tambah").attr("disabled", "disabled");

                    VIEW.find("td .HR_WILAYAH2").attr("disabled", "disabled");
                    VIEW.find("td .HR_PERUBAHAN_WILAYAH2").attr("disabled", "disabled").attr("readonly", "readonly");
                    VIEW.find("td .HR_PERGERAKAN_EWIL2").attr("disabled", "disabled").attr("readonly", "readonly");

                    VIEW.find("td .HR_KRITIKAL2").attr("disabled", "disabled");
                    VIEW.find("td .HR_PERUBAHAN_KRITIKAL2").attr("disabled", "disabled").attr("readonly", "readonly");
                    VIEW.find("td .HR_PERGERAKAN_EKAL2").attr("disabled", "disabled").attr("readonly", "readonly");
                }
                else {
                    $("#btn-tambah").removeAttr("disabled")

                    VIEW.find("td .HR_WILAYAH2").removeAttr("disabled");
                    VIEW.find("td .HR_PERUBAHAN_WILAYAH2").removeAttr("disabled");
                    VIEW.find("td .HR_PERGERAKAN_EWIL2").removeAttr("disabled");

                    VIEW.find("td .HR_KRITIKAL2").removeAttr("disabled");
                    VIEW.find("td .HR_PERUBAHAN_KRITIKAL2").removeAttr("disabled");
                    VIEW.find("td .HR_PERGERAKAN_EKAL2").removeAttr("disabled");
                }

                if (this.checked == true) {
                    $(this).attr("checked", "checked");
                }
                else {
                    $(this).removeAttr("checked");
                }
                $("#jumPilih").html($(".HR_NO_PEKERJA2:checked").length)

            });

            $(".HR_NO_PEKERJA3").on("click", function () {
                var VIEW = $(this).parents("tr");
                if ($(this).is(":checked") == false) {
                    $("input[name='pilihPekerja2']").prop('checked', false);
                }
                if ($(".HR_NO_PEKERJA3:checked").length >= '@ViewBag.belumMuktamad') {
                    $("input[name='pilihPekerja2']").prop('checked', true);
                }

                if ($(".HR_NO_PEKERJA3:checked").length <= 0) {

                    VIEW.find("td .HR_WILAYAH2").attr("disabled", "disabled");
                    VIEW.find("td .HR_PERUBAHAN_WILAYAH2").attr("disabled", "disabled").attr("readonly", "readonly");
                    VIEW.find("td .HR_PERGERAKAN_EWIL2").attr("disabled", "disabled").attr("readonly", "readonly");

                    VIEW.find("td .HR_KRITIKAL2").attr("disabled", "disabled");
                    VIEW.find("td .HR_PERUBAHAN_KRITIKAL2").attr("disabled", "disabled").attr("readonly", "readonly");
                    VIEW.find("td .HR_PERGERAKAN_EKAL2").attr("disabled", "disabled").attr("readonly", "readonly");

                    VIEW.find("#btn-edit").attr("disabled", "disabled")
                    VIEW.find("#btn-padam").attr("disabled", "disabled")
                    VIEW.find("#btn-cetak").attr("disabled", "disabled")
                    VIEW.find("#btn-muktamad").attr("disabled", "disabled")
                }
                else {

                    VIEW.find("td .HR_WILAYAH2").removeAttr("disabled");
                    VIEW.find("td .HR_PERUBAHAN_WILAYAH2").removeAttr("disabled");
                    VIEW.find("td .HR_PERGERAKAN_EWIL2").removeAttr("disabled");

                    VIEW.find("td .HR_KRITIKAL2").removeAttr("disabled");
                    VIEW.find("td .HR_PERUBAHAN_KRITIKAL2").removeAttr("disabled");
                    VIEW.find("td .HR_PERGERAKAN_EKAL2").removeAttr("disabled");

                    VIEW.find("#btn-edit").removeAttr("disabled")
                    VIEW.find("#btn-padam").removeAttr("disabled")
                    VIEW.find("#btn-cetak").removeAttr("disabled")
                    VIEW.find("#btn-muktamad").removeAttr("disabled")
                }

                if (this.checked == true) {
                    $(this).attr("checked", "checked");
                }
                else {
                    $(this).removeAttr("checked");
                }
                $("#jumPilih2").html($(".HR_NO_PEKERJA3:checked").length)

            });

            $("input[name='jenisPergerakan'], input[name='jenisPergerakan2']").on("click", function () {
                //$("input[type='radio'].HR_JENIS_PERGERAKAN").val();
                if ($(this).attr("id") == "add") {
                    $("#datatable_tabletools tbody tr").each(function () {
                        $(this).find("td:eq(2) input[type='radio']:checked").removeAttr("checked");
                    })

                    var VALUE = $(this).val();
                    $("#datatable_tabletools input[value=" + $(this).val() + "].HR_JENIS_PERGERAKAN2").prop('checked', true).attr("checked", "checked");
                    $("#datatable_tabletools tr").each(function () {
                        var VIEW = $(this);

                        JenisPergerakanBtn(VIEW, VALUE);
                    })
                }
                else {
                    $("#datatable_tabletools2 tbody tr:not(.success)").each(function () {
                        $(this).find("td:eq(2) input[type='radio']:checked").removeAttr("checked");
                    })

                    var VALUE = $(this).val();
                    $("#datatable_tabletools2 tr:not(.success) td input[value=" + $(this).val() + "].HR_JENIS_PERGERAKAN3").prop('checked', true).attr("checked", "checked");
                    $("#datatable_tabletools2 tr:not(.success)").each(function () {
                        var VIEW = $(this);

                        JenisPergerakanBtn(VIEW, VALUE);
                    })
                }

            });

            $(".HR_KRITIKAL2").on("keyup", function () {
                var VIEW = $(this).parents("tr");
                var nilai = 0;
                var nilai2 = 0;
                var HR_JUMLAH_PERUBAHAN = parseFloat(VIEW.find("td .HR_JUMLAH_PERUBAHAN2").val());
                var HR_GAJI_BARU2 = parseFloat(VIEW.find("td .HR_GAJI_BARU2").val());
                if (parseFloat($(this).val()) > 0 && HR_JUMLAH_PERUBAHAN > 0) {
                    nilai = HR_JUMLAH_PERUBAHAN * (parseFloat($(this).val()) / 100)
                }

                VIEW.find("td .HR_PERUBAHAN_KRITIKAL2").val(nilai.toFixed(2))

                if (parseFloat($(this).val()) > 0 && HR_GAJI_BARU2 > 0) {
                    nilai2 = HR_GAJI_BARU2 * (parseFloat($(this).val()) / 100);
                }
                VIEW.find("td .HR_PERGERAKAN_EKAL2").val(nilai2.toFixed(2))
            })

            $(".HR_WILAYAH2").on("keyup", function () {
                var VIEW = $(this).parents("tr");
                var nilai = 0;
                var nilai2 = 0;
                var HR_JUMLAH_PERUBAHAN = parseFloat(VIEW.find("td .HR_JUMLAH_PERUBAHAN2").val());
                var HR_GAJI_BARU2 = parseFloat(VIEW.find("td .HR_GAJI_BARU2").val());
                if (parseFloat($(this).val()) > 0 && HR_JUMLAH_PERUBAHAN > 0) {
                    nilai = HR_JUMLAH_PERUBAHAN * (parseFloat($(this).val()) / 100)
                }

                VIEW.find("td .HR_PERUBAHAN_WILAYAH2").val(nilai.toFixed(2))

                if (parseFloat($(this).val()) > 0 && HR_GAJI_BARU2 > 0) {
                    nilai2 = HR_GAJI_BARU2 * (parseFloat($(this).val()) / 100)
                }
                VIEW.find("td .HR_PERGERAKAN_EWIL2").val(nilai2.toFixed(2))
            })

            //$("#datatable_tabletools input[type='search']").on("keyup", function () {
            //    alert(table4.data().count())
            //    var item = $("input[value='" + $(this).val() + "'].noPekerja").parents(".parentView");
            //    if (item.length > 0) {
            //        $("#kepala").removeAttr("style");
            //        item.addClass("viewItem");
            //        var notItem = $(".parentView").not(".viewItem");
            //        notItem.each(function () {
            //            $(this).addClass("hide")
            //        })
            //    }
            //    else {
            //        $("#kepala").css({ "overflow-y": "scroll", "height": "3000px" })
            //        $(".parentView").each(function () {
            //            $(this).removeClass("viewItem");
            //            $(this).removeClass("hide")
            //        });
            //    }

            //});
            //$("#btn-approve").on("click", function (e) {
            //    e.preventDefault();
            //    $("#form-tambah").attr("action", "../Kewangan8/PengesahanPergerakanGaji")
            //    $("#form-tambah").submit();
            //})

            $("#btn-tambah").on("click", function () {
                $("#form-pergerakangaji").attr({ "action": "../Kewangan8/PergerakanGaji", "method": "post" }).removeAttr("target");
                $("#bodyHidden").show();
                $("#bodyHidden2").hide();
                $("#getChecked").html("");
                $("#tajukModel").html("Tambah")
                var no = 0;
                $("#datatable_tabletools tbody tr").each(function () {
                    if ($(this).find("td:eq(0) input[type='checkbox']").is(":checked") == true) {
                        var data1 = $(this).find("td:eq(0) input[type='checkbox']");
                        var data2 = $(this).find("td:eq(2) input:checked");
                        var data3 = $(this).find("td:eq(3) input:eq(1)");
                        var data4 = $(this).find("td:eq(4) input:eq(0)");
                        var data5 = $(this).find("td:eq(4) input:eq(1)");
                        var data6 = $(this).find("td:eq(5) input:eq(1)");
                        var data7 = $(this).find("td:eq(6) input:eq(1)");
                        var data8 = $(this).find("td:eq(5) input:eq(2)");

                        var data9 = $(this).find("td:eq(7) input:eq(0)");
                        var data10 = $(this).find("td:eq(7) input:eq(1)");
                        var data11 = $(this).find("td:eq(7) input:eq(2)");
                        var data12 = $(this).find("td:eq(7) input:eq(3)");

                        var data13 = $(this).find("td:eq(8) input:eq(0)");
                        var data14 = $(this).find("td:eq(8) input:eq(1)");
                        var data15 = $(this).find("td:eq(8) input:eq(2)");
                        var data16 = $(this).find("td:eq(8) input:eq(3)");

                        $("#getChecked").append("<input type='hidden' name='[" + no + "].HR_NO_PEKERJA' class='HR_NO_PEKERJA' id='" + no + "__HR_NO_PEKERJA' value='" + data1.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_JENIS_PERGERAKAN' class='HR_JENIS_PERGERAKAN' id='" + no + "__HR_JENIS_PERGERAKAN' value='" + data2.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_GRED' class='HR_GRED' id='" + no + "__HR_GRED' value='" + data3.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_GAJI_MIN' class='HR_GAJI_MIN' id='" + no + "__HR_GAJI_MIN' value='" + data4.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_GAJI_MAX' class='HR_GAJI_MAX' id='" + no + "__HR_GAJI_MAX' value='" + data5.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_GAJI_BARU' class='HR_GAJI_BARU' id='" + no + "__HR_GAJI_BARU' value='" + data6.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_MATRIKS_GAJI' class='HR_MATRIKS_GAJI' id='" + no + "__HR_MATRIKS_GAJI' value='" + data7.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_JUMLAH_PERUBAHAN' class='HR_JUMLAH_PERUBAHAN' id='" + no + "__HR_JUMLAH_PERUBAHAN' value='" + data8.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_KOD_KRITIKAL' class='HR_KOD_KRITIKAL' id='" + no + "__HR_KOD_KRITIKAL' value='" + data9.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_KRITIKAL' class='HR_KRITIKAL' id='" + no + "__HR_KRITIKAL' value='" + data10.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_PERUBAHAN_KRITIKAL' class='HR_PERUBAHAN_KRITIKAL' id='" + no + "__HR_PERUBAHAN_KRITIKAL' value='" + data11.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_PERGERAKAN_EKAL' class='HR_PERGERAKAN_EKAL' id='" + no + "__HR_PERGERAKAN_EKAL' value='" + data12.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_KOD_WILAYAH' class='HR_KOD_WILAYAH' id='" + no + "__HR_KOD_WILAYAH' value='" + data13.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_WILAYAH' class='HR_WILAYAH' id='" + no + "__HR_WILAYAH' value='" + data14.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_PERUBAHAN_WILAYAH' class='HR_PERUBAHAN_WILAYAH' id='" + no + "__HR_PERUBAHAN_WILAYAH' value='" + data15.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_PERGERAKAN_EWIL' class='HR_PERGERAKAN_EWIL' id='" + no + "__HR_PERGERAKAN_EWIL' value='" + data16.val() + "' />"
                                                );
                        no++;
                    }

                })
                $('#HR_NO_SURAT_KEBENARAN').removeAttr("disabled")
                $('#HR_BUTIR_PERUBAHAN').removeAttr("disabled")
                $('#HR_NP_FINALISED_HR').removeAttr("disabled")
                $('#HR_NAMA_PEGAWAI').removeAttr("disabled")
                $('#HR_FINALISED_IND_HR').removeAttr("disabled")

                $('#HR_NP_FINALISED_HR').val('@ViewBag.HR_NP_FINALISED_HR')
                $('#HR_NAMA_PEGAWAI').val('@ViewBag.HR_NAMA_PEGAWAI')
                $('#HR_FINALISED_IND_HR').val("T")
                $('#btnSub').val("Tambah")

                $('#ModalContent button[type="submit"]').attr({ "class": "btn btn-primary" }).html('<span class="fa fa-save"></span> Simpan')
                $('button[type="reset"]').show()

                $('#Modal').modal('show');
            })

            $("#datatable_tabletools2").on("click", "#btn-edit, #btn-padam, #btn-muktamad, #btn-cetak, #btn-surat", function () {
                $("#form-pergerakangaji").attr({ "action": "../Kewangan8/PergerakanGaji", "method": "post" }).removeAttr("target");
                $("#bodyHidden").show();
                $("#bodyHidden2").hide();
                var $buttonClicked = $(this);
                var id = $buttonClicked.attr('data-id');
                var kod = $buttonClicked.attr('data-kodperubahan');
                var tarikh = $buttonClicked.attr('data-tarikh');

                $("#getChecked").html("");
                var no = 0;
                $("#datatable_tabletools2 tbody tr").each(function () {
                    if (($(this).find("td:eq(0) input[type='checkbox']").is(":checked") == true) || $(this).find("td:eq(9) #btn-cetak").attr("id") == "btn-cetak" || $(this).find("td:eq(9) #btn-surat").attr("id") == "btn-surat") {
                        var data1 = $(this).find("td:eq(0) input[type='checkbox']");
                        var data2 = $(this).find("td:eq(2) input:checked");
                        var data3 = $(this).find("td:eq(3) input:eq(1)");
                        var data4 = $(this).find("td:eq(4) input:eq(0)");
                        var data5 = $(this).find("td:eq(4) input:eq(1)");
                        var data6 = $(this).find("td:eq(5) input:eq(1)");
                        var data7 = $(this).find("td:eq(6) input:eq(1)");
                        var data8 = $(this).find("td:eq(5) input:eq(2)");
                        var data9 = $(this).find("td:eq(1) input:eq(0)");
                        var data10 = $(this).find("td:eq(1) input:eq(1)");
                        var data11 = $(this).find("td:eq(1) input:eq(2)");

                        var data12 = $(this).find("td:eq(7) input:eq(0)");
                        var data13 = $(this).find("td:eq(7) input:eq(1)");
                        var data14 = $(this).find("td:eq(7) input:eq(2)");
                        var data15 = $(this).find("td:eq(7) input:eq(3)");

                        var data16 = $(this).find("td:eq(8) input:eq(0)");
                        var data17 = $(this).find("td:eq(8) input:eq(1)");
                        var data18 = $(this).find("td:eq(8) input:eq(2)");
                        var data19 = $(this).find("td:eq(8) input:eq(3)");

                        if (tarikh == data9.val() && id == data10.val() && kod == '00001') {
                            $("#getChecked").append("<input type='hidden' name='[" + no + "].HR_NO_PEKERJA' class='HR_NO_PEKERJA' id='" + no + "__HR_NO_PEKERJA' value='" + data1.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_TARIKH_MULA' class='HR_TARIKH_MULA' id='" + no + "__HR_TARIKH_MULA' value='" + data9.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_KEW8_ID' class='HR_KEW8_ID' id='" + no + "__HR_KEW8_ID' value='" + data10.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_KOD_PELARASAN' class='HR_KOD_PELARASAN' id='" + no + "__HR_KOD_PELARASAN' value='" + data11.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_JENIS_PERGERAKAN' class='HR_JENIS_PERGERAKAN' id='" + no + "__HR_JENIS_PERGERAKAN' value='" + data2.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_GRED' class='HR_GRED' id='" + no + "__HR_GRED' value='" + data3.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_GAJI_MIN' class='HR_GAJI_MIN' id='" + no + "__HR_GAJI_MIN' value='" + data4.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_GAJI_MAX' class='HR_GAJI_MAX' id='" + no + "__HR_GAJI_MAX' value='" + data5.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_GAJI_BARU' class='HR_GAJI_BARU' id='" + no + "__HR_GAJI_BARU' value='" + data6.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_MATRIKS_GAJI' class='HR_MATRIKS_GAJI' id='" + no + "__HR_MATRIKS_GAJI' value='" + data7.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_JUMLAH_PERUBAHAN' class='HR_JUMLAH_PERUBAHAN' id='" + no + "__HR_JUMLAH_PERUBAHAN' value='" + data8.val() + "' />" +

                                                "<input type='hidden' name='[" + no + "].HR_KOD_KRITIKAL' class='HR_KOD_KRITIKAL' id='" + no + "__HR_KOD_KRITIKAL' value='" + data12.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_KRITIKAL' class='HR_KRITIKAL' id='" + no + "__HR_KRITIKAL' value='" + data13.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_PERUBAHAN_KRITIKAL' class='HR_PERUBAHAN_KRITIKAL' id='" + no + "__HR_PERUBAHAN_KRITIKAL' value='" + data14.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_PERGERAKAN_EKAL' class='HR_PERGERAKAN_EKAL' id='" + no + "__HR_PERGERAKAN_EKAL' value='" + data15.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_KOD_WILAYAH' class='HR_KOD_WILAYAH' id='" + no + "__HR_KOD_WILAYAH' value='" + data16.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_WILAYAH' class='HR_WILAYAH' id='" + no + "__HR_WILAYAH' value='" + data17.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_PERUBAHAN_WILAYAH' class='HR_PERUBAHAN_WILAYAH' id='" + no + "__HR_PERUBAHAN_WILAYAH' value='" + data18.val() + "' />" +
                                                "<input type='hidden' name='[" + no + "].HR_PERGERAKAN_EWIL' class='HR_PERGERAKAN_EWIL' id='" + no + "__HR_PERGERAKAN_EWIL' value='" + data19.val() + "' />"
                                                );
                            no++;
                        }
                    }
                });
                if ($(this).attr("id") == "btn-edit" || $(this).attr("id") == "btn-muktamad" || $(this).attr("id") == "btn-cetak" || $(this).attr("id") == "btn-surat") {
                    $("#tajukModel").html("Kemaskini")
                    $('#HR_NO_SURAT_KEBENARAN').removeAttr("disabled")
                    $('#HR_BUTIR_PERUBAHAN').removeAttr("disabled")
                    $('#HR_NP_FINALISED_HR').removeAttr("disabled")
                    $('#HR_NAMA_PEGAWAI').removeAttr("disabled")
                    $('#HR_FINALISED_IND_HR').removeAttr("disabled")
                    $('#btnSub').val("Edit")
                    if ($(this).attr("id") == "btn-cetak") {
                        $('#btnSub').val("Cetak")
                    }
                    if ($(this).attr("id") == "btn-surat") {
                        $('#btnSub').val("Surat")
                    }

                    $('#ModalContent button[type="submit"]').attr({ "class": "btn btn-primary" }).html('<span class="fa fa-save"></span> Simpan')
                    $('button[type="reset"]').show()
                }
                else {
                    $("#tajukModel").html("Padam")
                    $('#HR_NO_SURAT_KEBENARAN').attr("disabled", "disabled")
                    $('#HR_BUTIR_PERUBAHAN').attr("disabled", "disabled")
                    $('#HR_NP_FINALISED_HR').attr("disabled", "disabled")
                    $('#HR_NAMA_PEGAWAI').attr("disabled", "disabled")
                    $('#HR_FINALISED_IND_HR').attr("disabled", "disabled")
                    $('#btnSub').val("Padam")

                    $('#ModalContent button[type="submit"]').attr({ "class": "btn btn-danger" }).html('<span class="fa fa-trash-o"></span> Padam')
                    $('button[type="reset"]').hide()
                }

                var ini = this;

                $.ajax({
                    url: "../Kewangan8/CariPergerakanGaji",
                    type: "Get",
                    contentType: "application/json; charset=utf-8",
                    data: { "id": id, "kod": kod, "tarikh": tarikh },
                    dataType: "Json",
                    success: function (kew8) {
                        $('#HR_NO_SURAT_KEBENARAN').val(kew8.HR_NO_SURAT_KEBENARAN)
                        $('#HR_BUTIR_PERUBAHAN').val(kew8.HR_BUTIR_PERUBAHAN)
                        $('#HR_NP_FINALISED_HR').val(kew8.HR_NP_FINALISED_HR)
                        $('#HR_NAMA_PEGAWAI').val(kew8.HR_NAMA_PEGAWAI)
                        $('#HR_FINALISED_IND_HR').val(kew8.HR_FINALISED_IND_HR)
                    }
                })
                if ($(this).attr("id") == "btn-muktamad") {
                    $("#form-pergerakangaji").find('#HR_FINALISED_IND_HR').val("Y")
                    $("#form-pergerakangaji").submit();
                }
                else if ($(this).attr("id") == "btn-cetak") {
                    $("#form-pergerakangaji").attr({ "action": "../Kewangan8/SenaraiSlipKewangan8", "method": "get", "target": "_blank" })
                    $("#form-pergerakangaji").submit();
                }
                else if ($(this).attr("id") == "btn-surat") {
                    $("#form-pergerakangaji").attr({ "action": "../Kewangan8/SenaraiSuratKewangan8", "method": "get", "target": "_blank" })
                    $("#bodyHidden2").show();
                    $("#bodyHidden").hide();
                    //$("#form-pergerakangaji").submit();
                    $('#Modal').modal('show');
                }
                else {
                    $('#Modal').modal('show');
                }

            })

        });
    </script>
}